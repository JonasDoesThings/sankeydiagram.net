!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("d3-array"),require("d3-collection"),require("d3-interpolate"),require("d3-selection"),require("d3-transition"),require("d3-dispatch"),require("d3-format")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-interpolate","d3-selection","d3-transition","d3-dispatch","d3-format"],factory):factory(global.d3=global.d3||{},global.d3,global.d3,global.d3,global.d3,global.d3,global.d3,global.d3)}(this,function(exports,d3Array,d3Collection,d3Interpolate,d3Selection,d3Transition,d3Dispatch,d3Format){"use strict";var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var module,floydWarshall_1=(function(module,exports){!function(){var undefined,FUNC_ERROR_TEXT="Expected a function",PLACEHOLDER="__lodash_placeholder__",NAN=NaN,wrapFlags=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,freeExports="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rsMiscUpper="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsSymbol="[\\ud800-\\udfff]",rsBreak="["+rsMiscUpper+"]",rsCombo="["+freeExports+"]",nodeUtil="\\d+",freeModule="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsSeq="[^\\ud800-\\udfff"+rsMiscUpper+nodeUtil+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsSeq+")",rsMiscUpper="(?:"+rsUpper+"|"+rsSeq+")",rsSeq="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+rsSeq+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+rsSeq+")*"),freeModule="(?:"+[freeModule,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsSymbol].join("|")+")",reApos=RegExp("['’]","g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",nodeUtil,freeModule].join("|"),"g"),reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff"+freeExports+"\\ufe0e\\ufe0f]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,nodeUtil="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeModule="object"==typeof self&&self&&self.Object===Object&&self,root=nodeUtil||freeModule||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&nodeUtil.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}function arrayEachRight(array,iteratee){for(var length=null==array?0:array.length;length--&&!1!==iteratee(array[length],length,array););return array}function arrayEvery(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayIncludes(array,value){return!!(null==array?0:array.length)&&-1<baseIndexOf(array,value,0)}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}var asciiSize=baseProperty("length");function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,!1}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value==value?function(array,value,fromIndex){var index=fromIndex-1,length=array.length;for(;++index<length;)if(array[index]===value)return index;return-1}(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!=value}function baseMean(array,iteratee){var length=null==array?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);current!==undefined&&(result=result===undefined?current:result+current)}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&-1<baseIndexOf(chrSymbols,strSymbols[index],0););return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&-1<baseIndexOf(chrSymbols,strSymbols[index],0););return index}var deburrLetter=basePropertyOf({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),escapeHtmlChar=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function hasUnicode(string){return reHasUnicode.test(string)}function mapToArray(map$$1){var index=-1,result=Array(map$$1.size);return map$$1.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}function safeGet(object,key){return"__proto__"==key?undefined:object[key]}function setToArray(set$$1){var index=-1,result=Array(set$$1.size);return set$$1.forEach(function(value){result[++index]=value}),result}function setToPairs(set$$1){var index=-1,result=Array(set$$1.size);return set$$1.forEach(function(value){result[++index]=[value,value]}),result}function stringSize(string){return(hasUnicode(string)?function(string){var result=reUnicode.lastIndex=0;for(;reUnicode.test(string);)++result;return result}:asciiSize)(string)}function stringToArray(string){return hasUnicode(string)?function(string){return string.match(reUnicode)||[]}(string):string.split("")}var unescapeHtmlChar=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _=function runInContext(methodOf){var Array=(methodOf=null==methodOf?root:_.defaults(root.Object(),methodOf,_.pick(root,contextProps))).Array,method=methodOf.Date,Error=methodOf.Error,Function=methodOf.Function,Math=methodOf.Math,Object=methodOf.Object,RegExp=methodOf.RegExp,String=methodOf.String,TypeError=methodOf.TypeError,arrayProto=Array.prototype,bindAll=Function.prototype,objectProto=Object.prototype,ceil=methodOf["__core-js_shared__"],funcToString=bindAll.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=(flow=/[^.]+$/.exec(ceil&&ceil.keys&&ceil.keys.IE_PROTO||""))?"Symbol(src)_1."+flow:"",nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),flowRight=moduleExports?methodOf.Buffer:undefined,over=methodOf.Symbol,Uint8Array=methodOf.Uint8Array,allocUnsafe=flowRight?flowRight.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=over?over.isConcatSpreadable:undefined,symIterator=over?over.iterator:undefined,symToStringTag=over?over.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),overSome=methodOf.clearTimeout!==root.clearTimeout&&methodOf.clearTimeout,multiply=method&&method.now!==root.Date.now&&method.now,divide=methodOf.setTimeout!==root.setTimeout&&methodOf.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,subtract=flowRight?flowRight.isBuffer:undefined,nativeIsFinite=methodOf.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=method.now,nativeParseInt=methodOf.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,range=getNative(methodOf,"DataView"),Map=getNative(methodOf,"Map"),rangeRight=getNative(methodOf,"Promise"),Set=getNative(methodOf,"Set"),add=getNative(methodOf,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=add&&new add,realNames={},dataViewCtorString=toSource(range),mapCtorString=toSource(Map),promiseCtorString=toSource(rangeRight),setCtorString=toSource(Set),weakMapCtorString=toSource(add),overEvery=over?over.prototype:undefined,symbolValueOf=overEvery?overEvery.valueOf:undefined,symbolToString=overEvery?overEvery.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}var baseCreate=function(result){if(!isObject(result))return{};if(objectCreate)return objectCreate(result);object.prototype=result;result=new object;return object.prototype=undefined,result};function object(){}function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(data){data=this.__data__=new ListCache(data);this.size=data.size}function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){(value===undefined||eq(object[key],value))&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=null==object;++index<length;)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number==number&&(upper!==undefined&&(number=number<=upper?number:upper),lower!==undefined&&(number=lower<=number?number:lower)),number}function baseClone(value,bitmask,customizer,isFunc,object,stack){var result,stacked=1&bitmask,isFlat=2&bitmask,isFull=4&bitmask;if((result=customizer?object?customizer(value,isFunc,object,stack):customizer(value):result)!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function(array){var length=array.length,result=new array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!stacked)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,stacked);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!stacked)return isFlat?function(source,object){return copyObject(source,getSymbolsIn(source),object)}(value,function(object,source){return object&&copyObject(source,keysIn(source),object)}(result,value)):function(source,object){return copyObject(source,getSymbols(source),object)}(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function(dataView,buffer){buffer=buffer?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case"[object Uint8ClampedArray]":case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return function(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag:return new Ctor;case symbolTag:return function(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}(object)}}(value,tag,stacked)}}stacked=(stack=stack||new Stack).get(value);if(stacked)return stacked;if(stack.set(value,result),isSet(value))return value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))}),result;if(isMap(value))return value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result;var props=isArr?undefined:(isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys)(value);return arrayEach(props||value,function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}function baseConformsTo(object,source,props){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return!1}return!0}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):200<=values.length&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=null==iteratee?value:iteratee(value),value=comparator||0!==value?value:0;if(isCommon&&computed==computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}},(lodash.prototype=baseLodash.prototype).constructor=lodash,(LodashWrapper.prototype=baseCreate(baseLodash.prototype)).constructor=LodashWrapper,(LazyWrapper.prototype=baseCreate(baseLodash.prototype)).constructor=LazyWrapper,Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(result){return result=this.has(result)&&delete this.__data__[result],this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(index){var data=this.__data__;return!((index=assocIndexOf(data,index))<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(index){var data=this.__data__;return(index=assocIndexOf(data,index))<0?undefined:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(result){return result=getMapData(this,result).delete(result),this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(result){var data=this.__data__,result=data.delete(result);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0);function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var computed,result,value=array[index],current=iteratee(value);null!=current&&(computed===undefined?current==current&&!isSymbol(current):comparator(current,computed))&&(computed=current,result=value)}return result}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate=predicate||isFlattenable,result=result||[];++index<length;){var value=array[index];0<depth&&predicate(value)?1<depth?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var baseFor=createBaseFor(),baseForRight=createBaseFor(!0);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,result,symbolsFunc){result=result(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return null==value?value===undefined?"[object Undefined]":"[object Null]":(symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}:function(value){return nativeObjectToString.call(value)})(value)}function baseGt(value,other){return other<value}function baseHas(object,key){return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||120<=length&&120<=array.length)?new SetCache(othIndex&&array):undefined}var array=arrays[0],index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){var value=array[index],computed=iteratee?iteratee(value):value,value=comparator||0!==value?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result.push(value)}}return result}function baseInvoke(object,func,args){func=null==(object=parent(object,func=castPath(func,object)))?object:object[toKey(last(func))];return null==func?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othUnwrapped=isArray(other),objTag=objIsArr?arrayTag:getTag(object),isSameTag=othUnwrapped?arrayTag:getTag(other),objUnwrapped=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othUnwrapped=(isSameTag=isSameTag==argsTag?objectTag:isSameTag)==objectTag,isSameTag=objTag==isSameTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objUnwrapped=!(objIsArr=!0)}if(isSameTag&&!objUnwrapped)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other))?!0:!1;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var result=mapToArray;case setTag:var stacked=1&bitmask;if(result=result||setToArray,object.size!=other.size&&!stacked)return!1;stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);result=equalArrays(result(object),result(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){objUnwrapped=objUnwrapped&&hasOwnProperty.call(object,"__wrapped__"),othUnwrapped=othUnwrapped&&hasOwnProperty.call(other,"__wrapped__");if(objUnwrapped||othUnwrapped){objUnwrapped=objUnwrapped?object.value():object,othUnwrapped=othUnwrapped?other.value():other;return stack=stack||new Stack,equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return isSameTag&&(stack=stack||new Stack,function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length,objCtor=getAllKeys(other).length;if(objLength!=objCtor&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var othCtor=stack.get(object);if(othCtor&&stack.get(other))return othCtor==other;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){key=objProps[index];var compared,objValue=object[key],othValue=other[key];if(!((compared=customizer?isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack):compared)===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||"constructor"==key}result&&!skipCtor&&(objCtor=object.constructor,othCtor=other.constructor,objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1));return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack))}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var result,stack=new Stack;if(!((result=customizer?customizer(objValue,srcValue,key,object,source,stack):result)===undefined?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}function baseIsNative(value){return!(!isObject(value)||(func=value,maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value));var func}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var key,result=[];for(key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var key,isProto=isPrototype(object),result=[];for(key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(),isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){var newValue;isObject(srcValue)?(stack=stack||new Stack,function(object,isTyped,key,srcIndex,mergeFunc,customizer,stack){var newValue,isCommon,isArr,objValue=safeGet(object,key),srcValue=safeGet(isTyped,key),isBuff=stack.get(srcValue);isBuff?assignMergeValue(object,key,isBuff):(newValue=customizer?customizer(objValue,srcValue,key+"",object,isTyped,stack):undefined,(isCommon=newValue===undefined)&&(isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue),newValue=srcValue,isArr||isBuff||isTyped?newValue=isArray(objValue)?objValue:isArrayLikeObject(objValue)?copyArray(objValue):isBuff?cloneBuffer(srcValue,!(isCommon=!1)):isTyped?cloneTypedArray(srcValue,!(isCommon=!1)):[]:isPlainObject(srcValue)||isArguments(srcValue)?isArguments(newValue=objValue)?newValue=toPlainObject(objValue):(!isObject(objValue)||srcIndex&&isFunction(objValue))&&(newValue=initCloneObject(srcValue)):isCommon=!1),isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue)),assignMergeValue(object,key,newValue))}(object,source,key,srcIndex,baseMerge,customizer,stack)):(newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined,assignMergeValue(object,key,newValue=newValue===undefined?srcValue:newValue))},keysIn)}function baseNth(array,n){var length=array.length;if(length)return isIndex(n+=n<0?length:0,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1;return iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee())),function(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}(baseMap(collection,function(value,key,collection){return{criteria:arrayMap(iteratees,function(iteratee){return iteratee(value)}),index:++index,value:value}}),function(object,other){return function(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;for(;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(ordersLength<=index)return result;var order=orders[index];return result*("desc"==order?-1:1)}}return object.index-other.index}(object,other,orders)})}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;-1<(fromIndex=indexOf(seen,computed,fromIndex,comparator));)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var previous,index=indexes[length];length!=lastIndex&&index===previous||(isIndex(previous=index)?splice.call(array,index,1):baseUnset(array,index))}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRepeat(string,n){var result="";if(!string||n<1||9007199254740991<n)return result;for(;n%2&&(result+=string),(n=nativeFloor(n/2))&&(string+=string),n;);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(array,n){array=values(array);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object))return object;for(var index=-1,length=(path=castPath(path,object)).length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var objValue,key=toKey(path[index]),newValue=value;index!=lastIndex&&(objValue=nested[key],(newValue=customizer?customizer(objValue,key,nested):undefined)===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})),assignValue(nested,key,newValue),nested=nested[key]}return object}var baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity,floor=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;(end=length<end?length:end)<0&&(end+=length),length=end<(start=start<0?length<-start?0:length+start:start)?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return!(result=predicate(value,index,collection))}),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=null==array?low:array.length;if("number"==typeof value&&value==value&&high<=2147483647){for(;low<high;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=1+mid:high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=null==array?0:array.length,valIsNaN=value!=value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;low<high;){var mid=nativeFloor((low+high)/2),setLow=iteratee(array[mid]),othIsDefined=setLow!==undefined,othIsNull=null===setLow,othIsReflexive=setLow==setLow,othIsSymbol=isSymbol(setLow),setLow=valIsNaN?retHighest||othIsReflexive:valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):!othIsNull&&!othIsSymbol&&(retHighest?setLow<=value:setLow<value);setLow?low=mid+1:high=mid}return nativeMin(high,4294967294)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var seen,value=array[index],computed=iteratee?iteratee(value):value;index&&eq(computed,seen)||(seen=computed,result[resIndex++]=0===value?0:value)}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NAN:+value}function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(200<=length){var set$$1=iteratee?null:createSet(array);if(set$$1)return setToArray(set$$1);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value,value=comparator||0!==value?value:0;if(isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}function baseUnset(object,path){return null==(object=parent(object,path=castPath(path,object)))||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result=value instanceof LazyWrapper?value.value():result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2)return length?baseUniq(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return"function"==typeof value?value:identity}function castPath(value,object){return isArray(value)?value:(isKey(),[value])}var round=baseRest;function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,!start&&length<=end?array:baseSlice(array,start,end)}var clearTimeout=overSome||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,result){if(result)return buffer.slice();result=buffer.length,result=allocUnsafe?allocUnsafe(result):new buffer.constructor(result);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneTypedArray(typedArray,buffer){buffer=buffer?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value==value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&other<value||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array=array||Array(length);++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;(isNew?baseAssignValue:assignValue)(object,key,newValue=newValue===undefined?source[key]:newValue)}return object}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:undefined,guard=2<length?sources[2]:undefined,customizer=3<assigner.length&&"function"==typeof customizer?(length--,customizer):undefined;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}function createCaseFirst(methodName){return function(trailing){var strSymbols=hasUnicode(trailing=toString(trailing))?stringToArray(trailing):undefined,chr=strSymbols?strSymbols[0]:trailing.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):trailing.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length,holders=getHolder(wrapper);index--;)args[index]=arguments[index];holders=length<3&&args[0]!==holders&&args[length-1]!==holders?[]:replaceHolders(args,holders);return(length-=holders.length)<arity?createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length):apply(this&&this!==root&&this instanceof wrapper?Ctor:func,this,args)}}function createFind(findIndexFunc){return function(collection,predicate,index){var iteratee,iterable=Object(collection);isArrayLike(collection)||(iteratee=getIteratee(predicate,3),collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)});index=findIndexFunc(collection,predicate,index);return-1<index?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);prereq&&!wrapper&&"wrapper"==getFuncName(func)&&(wrapper=new LodashWrapper([],!0))}for(index=wrapper?index:length;++index<length;)var funcName=getFuncName(func=funcs[index]),data="wrapper"==funcName?getData(func):undefined,wrapper=data&&isLaziable(data[0])&&424==data[1]&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value))return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=128&bitmask,isBind=1&bitmask,isBindKey=2&bitmask,isCurried=24&bitmask,isFlip=512&bitmask,Ctor=isBindKey?undefined:createCtor(func);return function wrapper(){for(var holdersCount,args=Array(length=arguments.length),index=length;index--;)args[index]=arguments[index];if(isCurried&&(holdersCount=function(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}(args,thisBinding=getHolder(wrapper))),partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var fn=replaceHolders(args,thisBinding);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,fn,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func,length=args.length;return argPos?args=function(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}(args,argPos):isFlip&&1<length&&args.reverse(),isAry&&ary<length&&(args.length=ary),(fn=this&&this!==root&&this instanceof wrapper?Ctor||createCtor(fn):fn).apply(thisBinding,args)}}function createInverter(setter,toIteratee){return function(object,iteratee){return function(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)}),accumulator}(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;other="string"==typeof value||"string"==typeof other?(value=baseToString(value),baseToString(other)):(value=baseToNumber(value),baseToNumber(other)),result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){var result=(chars=chars===undefined?" ":baseToString(chars)).length;if(result<2)return result?baseRepeat(chars,length):chars;result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),function(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}(start,end,step=step===undefined?start<end?1:-1:toFinite(step),fromRight)}}function createRelationalOperation(operator){return function(value,other){return"string"==typeof value&&"string"==typeof other||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,result,placeholder,thisArg,partials,holders,argPos,ary,newData){var isCurry=8&bitmask;bitmask|=isCurry?32:64,4&(bitmask&=~(isCurry?64:32))||(bitmask&=-4);newData=[func,bitmask,thisArg,isCurry?partials:undefined,isCurry?holders:undefined,isCurry?undefined:partials,isCurry?undefined:holders,argPos,ary,newData],result=result.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),precision=null==precision?0:nativeMin(toInteger(precision),292)){var pair=(toString(number)+"e").split("e");return+((pair=(toString(func(pair[0]+"e"+(+pair[1]+precision)))+"e").split("e"))[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=Set&&1/setToArray(new Set([,-0]))[1]==1/0?function(values){return new Set(values)}:noop;function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):function(object,props){return arrayMap(props,function(key){return[key,object[key]]})}(object,keysFunc(object))}}function createWrap(func,bitmask,result,partials,holders,argPos,newData,arity){var isBindKey=2&bitmask;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var partialsRight,holdersRight,length=partials?partials.length:0;length||(bitmask&=-97,partials=holders=undefined),newData=newData===undefined?newData:nativeMax(toInteger(newData),0),arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,64&bitmask&&(partialsRight=partials,holdersRight=holders,partials=holders=undefined);var data=isBindKey?undefined:getData(func),newData=[func,bitmask,result,partials,holders,partialsRight,holdersRight,argPos,newData,arity];data&&function(data,source){var value=data[1],srcBitmask=source[1],newBitmask=value|srcBitmask,isCommon=newBitmask<131,isCombo=128==srcBitmask&&8==value||128==srcBitmask&&256==value&&data[7].length<=source[8]||384==srcBitmask&&source[7].length<=source[8]&&8==value;if(!isCommon&&!isCombo)return;1&srcBitmask&&(data[2]=source[2],newBitmask|=1&value?0:4);value=source[3];{var partials;value&&(partials=data[3],data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4])}(value=source[5])&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]);(value=source[7])&&(data[7]=value);128&srcBitmask&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8]));null==data[9]&&(data[9]=source[9]);data[0]=source[0],data[1]=newBitmask}(newData,data),func=newData[0],bitmask=newData[1],result=newData[2],partials=newData[3],holders=newData[4],!(arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0))&&24&bitmask&&(bitmask&=-25);result=bitmask&&1!=bitmask?8==bitmask||16==bitmask?createCurry(func,bitmask,arity):32!=bitmask&&33!=bitmask||holders.length?createHybrid.apply(undefined,newData):createPartial(func,bitmask,result,partials):function(func,bitmask,thisArg){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(isBind?thisArg:this,arguments)}}(func,bitmask,result);return setWrapToString((data?baseSetData:setData)(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),stack.delete(srcValue)),objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,stacked=other.length;if(arrLength!=stacked&&!(isPartial&&arrLength<stacked))return!1;stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if((compared=customizer?isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack):compared)!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){return!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=metaMap?function(func){return metaMap.get(func)}:noop;function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getHolder(func){return(hasOwnProperty.call(lodash,"placeholder")?lodash:func).placeholder}function getIteratee(){var result=(result=lodash.iteratee||iteratee)===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result}function getMapData(type,key){var value,data=type.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,value){value=function(object,key){return null==object?undefined:object[key]}(object,value);return baseIsNative(value)?value:undefined}var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;function hasPath(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(isObject(object)){var type=typeof index;return("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}}function isKey(){return 1}function isLaziable(func){var funcName=getFuncName(func),data=lodash[funcName];if("function"==typeof data&&funcName in LazyWrapper.prototype){if(func===data)return 1;data=getData(data);return data&&func===data[0]}}(range&&getTag(new range(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||rangeRight&&"[object Promise]"!=getTag(rangeRight.resolve())||Set&&getTag(new Set)!=setTag||add&&getTag(new add)!=weakMapTag)&&(getTag=function(ctorString){var result=baseGetTag(ctorString),ctorString=result==objectTag?ctorString.constructor:undefined,ctorString=ctorString?toSource(ctorString):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isMaskable=ceil?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function isStrictComparable(value){return value==value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(srcValue!==undefined||key in Object(object)))}}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];for(var index=-1,otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}var setData=shortOut(baseSetData),setTimeout=divide||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(floor);function setWrapToString(wrapper,match,bitmask){var match=match+"";return setToString(wrapper,function(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(1<length?"& ":"")+details[lastIndex],details=details.join(2<length?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}(match,function(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}((match=(match=match).match(reWrapDetails))?match[1].split(reSplitDetails):[],bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;for(size=size===undefined?length:size;++index<size;){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],array[index]=value}return array.length=size,array}var stringToPath=function(result){var cache=(result=memoize(result,function(key){return 500===cache.size&&cache.clear(),key})).cache;return result}(function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}),result});function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]}),differenceWith=baseRest(function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]});function findIndex(array,predicate,index){var length=null==array?0:array.length;if(!length)return-1;index=null==index?0:toInteger(index);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length-1;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){return(null==array?0:array.length)?baseFlatten(array,1):[]}function head(array){return array&&array.length?array[0]:undefined}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return(comparator="function"==typeof comparator?comparator:undefined)&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});function last(array){var length=null==array?0:array.length;return length?array[length-1]:undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}var pullAt=flatRest(function(array,indexes){var length=null==array?0:array.length,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending)),result});function reverse(array){return null==array?array:nativeReverse.call(array)}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))}),unionWith=baseRest(function(arrays){var comparator="function"==typeof(comparator=last(arrays))?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)});function unzip(array){if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,function(group){return isArrayLikeObject(group)&&(length=nativeMax(group.length,length),1)}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(result,iteratee){if(!result||!result.length)return[];result=unzip(result);return null==iteratee?result:arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))}),xorWith=baseRest(function(arrays){var comparator="function"==typeof(comparator=last(arrays))?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)}),zip=baseRest(unzip);var zipWith=baseRest(function(arrays){var iteratee=arrays.length,iteratee="function"==typeof(iteratee=1<iteratee?arrays[iteratee-1]:undefined)?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee)});function chain(result){result=lodash(result);return result.__chain__=!0,result}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){function interceptor(object){return baseAt(object,paths)}var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__;return!(1<length||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?((value=value.slice(start,+start+(length?1:0))).__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined),array})):this.thru(interceptor)});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1)});var find=createFind(findIndex),findLast=createFind(findLastIndex);function forEach(collection,iteratee){return(isArray(collection)?arrayEach:baseEach)(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){return(isArray(collection)?arrayEachRight:baseEachRight)(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])});var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc="function"==typeof path,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)}),result}),keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map$$1(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,getIteratee(iteratee,3))}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});var sortBy=baseRest(function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return 1<length&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:2<length&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=multiply||function(){return root.Date.now()};function ary(func,n,guard){return n=guard?undefined:n,n=func&&null==n?func.length:n,createWrap(func,128,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return 0<--n&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}var bind=baseRest(function(func,thisArg,partials){var holders,bitmask=1;return partials.length&&(holders=replaceHolders(partials,getHolder(bind)),bitmask|=32),createWrap(func,bitmask,thisArg,partials,holders)}),bindKey=baseRest(function(object,key,partials){var holders,bitmask=3;return partials.length&&(holders=replaceHolders(partials,getHolder(bindKey)),bitmask|=32),createWrap(key,bitmask,object,partials,holders)});function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return lastCallTime===undefined||wait<=timeSinceLastCall||timeSinceLastCall<0||maxing&&maxWait<=time-lastInvokeTime}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined)return function(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){timerId!==undefined&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined},debounced.flush=function(){return timerId===undefined?result:trailingEdge(now())},debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var result=arguments,key=resolver?resolver.apply(this,result):result[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);result=func.apply(this,result);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}memoize.Cache=MapCache;var overArgs=round(function(func,transforms){var funcsLength=(transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()))).length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,32,undefined,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,64,undefined,partials,holders)}),rearg=flatRest(function(func,indexes){return createWrap(func,256,undefined,undefined,undefined,indexes)});function eq(value,other){return value===other||value!=value&&other!=other}var gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return other<=value}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):function(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag};function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=subtract||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):function(value){return isObjectLike(value)&&baseGetTag(value)==dateTag};function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return tag==errorTag||"[object DOMException]"==tag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value)}function isFunction(tag){if(!isObject(tag))return!1;tag=baseGetTag(tag);return tag==funcTag||tag==genTag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}function isInteger(value){return"number"==typeof value&&value==toInteger(value)}function isLength(value){return"number"==typeof value&&-1<value&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isMap=nodeIsMap?baseUnary(nodeIsMap):function(value){return isObjectLike(value)&&getTag(value)==mapTag};function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(Ctor){if(!isObjectLike(Ctor)||baseGetTag(Ctor)!=objectTag)return!1;Ctor=getPrototype(Ctor);if(null===Ctor)return!0;Ctor=hasOwnProperty.call(Ctor,"constructor")&&Ctor.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):function(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag};var isSet=nodeIsSet?baseUnary(nodeIsSet):function(value){return isObjectLike(value)&&getTag(value)==setTag};function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};var lt=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value)return[];if(isArrayLike(value))return(isString(value)?stringToArray:copyArray)(value);if(symIterator&&value[symIterator])return function(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}(value[symIterator]());var tag=getTag(value);return(tag==mapTag?mapToArray:tag==setTag?setToArray:values)(value)}function toFinite(value){return value?(value=toNumber(value))!==1/0&&value!==-1/0?value==value?value:0:17976931348623157e292*(value<0?-1:1):0===value?value:0}function toInteger(remainder){var result=toFinite(remainder),remainder=result%1;return result==result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,4294967295):0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if("string"!=typeof(value=isObject(value)?isObject(isBinary="function"==typeof value.valueOf?value.valueOf():value)?isBinary+"":isBinary:value))return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toString(value){return null==value?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source))copyObject(source,keys(source),object);else for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at=flatRest(baseAt);var defaults=baseRest(function(object,sources){object=Object(object);var index=-1,length=sources.length,guard=2<length?sources[2]:undefined;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(length=1);++index<length;)for(var source=sources[index],props=keysIn(source),propsIndex=-1,propsLength=props.length;++propsIndex<propsLength;){var key=props[propsIndex],value=object[key];(value===undefined||eq(value,objectProto[key])&&!hasOwnProperty.call(object,key))&&(object[key]=source[key])}return object}),defaultsDeep=baseRest(function(args){return args.push(undefined,customDefaultsMerge),apply(mergeWith,undefined,args)});function get(object,result,defaultValue){result=null==object?undefined:baseGet(object,result);return result===undefined?defaultValue:result}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){result[value=null!=value&&"function"!=typeof value.toString?nativeObjectToString.call(value):value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){null!=value&&"function"!=typeof value.toString&&(value=nativeObjectToString.call(value)),hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]},getIteratee),invoke=baseRest(baseInvoke);function keys(object){return(isArrayLike(object)?arrayLikeKeys:baseKeys)(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,function(path){return path=castPath(path,object),isDeep=isDeep||1<path.length,path}),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,7,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result});var pick=flatRest(function(object,paths){return null==object?{}:function(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}(object,paths)});function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}var toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn);function values(object){return null==object?[]:baseValues(object,keys(object))}var camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase");var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){return string=toString(string),(pattern=guard?undefined:pattern)===undefined?(function(string){return reHasUnicodeWord.test(string)}(string)?function(string){return string.match(reUnicodeWord)||[]}:function(string){return string.match(reAsciiWord)||[]})(string):string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}}),bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){key=toKey(key),baseAssignValue(object,key,bind(object[key],object))}),object});function constant(value){return function(){return value}}var flow=createFlow(),flowRight=createFlow(!0);function identity(value){return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,1))}method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__);return(result.__actions__=copyArray(this.__actions__)).push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}function noop(){}over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome);function property(path){return baseProperty(toKey(path))}range=createRange(),rangeRight=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}add=createMathOperation(function(augend,addend){return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor=createRound("floor");var source,multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);return lodash.after=function(n,func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments)}},lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=function(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]},lodash.chain=chain,lodash.chunk=function(array,size,guard){size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0);var length=null==array?0:array.length;if(!length||size<1)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);return result},lodash.compact=function(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result},lodash.concat=function(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))},lodash.cond=function(pairs){var length=null==pairs?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})},lodash.conforms=function(source){return function(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}(baseClone(source,1))},lodash.constant=constant,lodash.countBy=countBy,lodash.create=function(result,properties){return result=baseCreate(result),null==properties?result:baseAssign(result,properties)},lodash.curry=function curry(func,result,guard){result=createWrap(func,8,undefined,undefined,undefined,undefined,undefined,result=guard?undefined:result);return result.placeholder=curry.placeholder,result},lodash.curryRight=function curryRight(func,result,guard){result=createWrap(func,16,undefined,undefined,undefined,undefined,undefined,result=guard?undefined:result);return result.placeholder=curryRight.placeholder,result},lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=guard||n===undefined?1:toInteger(n))<0?0:n,length):[]},lodash.dropRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,0,(n=length-(n=guard||n===undefined?1:toInteger(n)))<0?0:n):[]},lodash.dropRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]},lodash.dropWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]},lodash.fill=function(array,value,start,end){var length=null==array?0:array.length;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),function(array,value,start,end){var length=array.length;for((start=toInteger(start))<0&&(start=length<-start?0:length+start),(end=end===undefined||length<end?length:toInteger(end))<0&&(end+=length),end=end<start?0:toLength(end);start<end;)array[start++]=value;return array}(array,value,start,end)):[]},lodash.filter=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,getIteratee(predicate,3))},lodash.flatMap=function(collection,iteratee){return baseFlatten(map$$1(collection,iteratee),1)},lodash.flatMapDeep=function(collection,iteratee){return baseFlatten(map$$1(collection,iteratee),1/0)},lodash.flatMapDepth=function(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),baseFlatten(map$$1(collection,iteratee),depth)},lodash.flatten=flatten,lodash.flattenDeep=function(array){return(null==array?0:array.length)?baseFlatten(array,1/0):[]},lodash.flattenDepth=function(array,depth){return(null==array?0:array.length)?baseFlatten(array,depth=depth===undefined?1:toInteger(depth)):[]},lodash.flip=function(func){return createWrap(func,512)},lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=function(pairs){for(var index=-1,length=null==pairs?0:pairs.length,result={};++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result},lodash.functions=function(object){return null==object?[]:baseFunctions(object,keys(object))},lodash.functionsIn=function(object){return null==object?[]:baseFunctions(object,keysIn(object))},lodash.groupBy=groupBy,lodash.initial=function(array){return(null==array?0:array.length)?baseSlice(array,0,-1):[]},lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map$$1,lodash.mapKeys=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)}),result},lodash.mapValues=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result},lodash.matches=function(source){return baseMatches(baseClone(source,1))},lodash.matchesProperty=function(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,1))},lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function(n){return n=toInteger(n),baseRest(function(args){return baseNth(args,n)})},lodash.omit=omit,lodash.omitBy=function(object,predicate){return pickBy(object,negate(getIteratee(predicate)))},lodash.once=function(func){return before(2,func)},lodash.orderBy=function(collection,iteratees,orders,guard){return null==collection?[]:baseOrderBy(collection,iteratees=!isArray(iteratees)?null==iteratees?[]:[iteratees]:iteratees,orders=!isArray(orders=guard?undefined:orders)?null==orders?[]:[orders]:orders)},lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function(object){return function(path){return null==object?undefined:baseGet(object,path)}},lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=function(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array},lodash.pullAllWith=function(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array},lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,negate(getIteratee(predicate,3)))},lodash.remove=function(array,predicate){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result},lodash.rest=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return baseRest(func,start=start===undefined?start:toInteger(start))},lodash.reverse=reverse,lodash.sampleSize=function(collection,n,guard){return n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:toInteger(n),(isArray(collection)?arraySampleSize:baseSampleSize)(collection,n)},lodash.set=function(object,path,value){return null==object?object:baseSet(object,path,value)},lodash.setWith=function(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseSet(object,path,value,customizer)},lodash.shuffle=function(collection){return(isArray(collection)?arrayShuffle:baseShuffle)(collection)},lodash.slice=function(array,start,end){var length=null==array?0:array.length;return length?(end=end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,length):(start=null==start?0:toInteger(start),end===undefined?length:toInteger(end)),baseSlice(array,start,end)):[]},lodash.sortBy=sortBy,lodash.sortedUniq=function(array){return array&&array.length?baseSortedUniq(array):[]},lodash.sortedUniqBy=function(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]},lodash.split=function(string,separator,limit){return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),(limit=limit===undefined?4294967295:limit>>>0)?(string=toString(string))&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&!(separator=baseToString(separator))&&hasUnicode(string)?castSlice(stringToArray(string),0,limit):string.split(separator,limit):[]},lodash.spread=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=null==start?0:nativeMax(toInteger(start),0),baseRest(function(otherArgs){var array=otherArgs[start],otherArgs=castSlice(otherArgs,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})},lodash.tail=function(array){var length=null==array?0:array.length;return length?baseSlice(array,1,length):[]},lodash.take=function(array,n,guard){return array&&array.length?baseSlice(array,0,(n=guard||n===undefined?1:toInteger(n))<0?0:n):[]},lodash.takeRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=length-(n=guard||n===undefined?1:toInteger(n)))<0?0:n,length):[]},lodash.takeRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]},lodash.takeWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]},lodash.tap=function(value,interceptor){return interceptor(value),value},lodash.throttle=function(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=function(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))},lodash.toPlainObject=toPlainObject,lodash.transform=function(object,iteratee,accumulator){var Ctor,isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);return iteratee=getIteratee(iteratee,4),null==accumulator&&(Ctor=object&&object.constructor,accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)&&isFunction(Ctor)?baseCreate(getPrototype(object)):{}),(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator},lodash.unary=function(func){return ary(func,1)},lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=function(array){return array&&array.length?baseUniq(array):[]},lodash.uniqBy=function(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]},lodash.uniqWith=function(array,comparator){return comparator="function"==typeof comparator?comparator:undefined,array&&array.length?baseUniq(array,undefined,comparator):[]},lodash.unset=function(object,path){return null==object||baseUnset(object,path)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater))},lodash.updateWith=function(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseUpdate(object,path,castFunction(updater),customizer)},lodash.values=values,lodash.valuesIn=function(object){return null==object?[]:baseValues(object,keysIn(object))},lodash.without=without,lodash.words=words,lodash.wrap=function(value,wrapper){return partial(castFunction(wrapper),value)},lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=function(props,values){return baseZipObject(props||[],values||[],assignValue)},lodash.zipObjectDeep=function(props,values){return baseZipObject(props||[],values||[],baseSet)},lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=function(number,lower,upper){return upper===undefined&&(upper=lower,lower=undefined),upper!==undefined&&(upper=(upper=toNumber(upper))==upper?upper:0),lower!==undefined&&(lower=(lower=toNumber(lower))==lower?lower:0),baseClamp(toNumber(number),lower,upper)},lodash.clone=function(value){return baseClone(value,4)},lodash.cloneDeep=function(value){return baseClone(value,5)},lodash.cloneDeepWith=function(value,customizer){return baseClone(value,5,customizer="function"==typeof customizer?customizer:undefined)},lodash.cloneWith=function(value,customizer){return baseClone(value,4,customizer="function"==typeof customizer?customizer:undefined)},lodash.conformsTo=function(object,source){return null==source||baseConformsTo(object,source,keys(source))},lodash.deburr=deburr,lodash.defaultTo=function(value,defaultValue){return null==value||value!=value?defaultValue:value},lodash.divide=divide,lodash.endsWith=function(string,target,position){string=toString(string),target=baseToString(target);var end=string.length,end=position=position===undefined?end:baseClamp(toInteger(position),0,end);return 0<=(position-=target.length)&&string.slice(position,end)==target},lodash.eq=eq,lodash.escape=function(string){return(string=toString(string))&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string},lodash.escapeRegExp=function(string){return(string=toString(string))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string},lodash.every=function(collection,predicate,guard){return(isArray(collection)?arrayEvery:baseEvery)(collection,getIteratee(predicate=guard&&isIterateeCall(collection,predicate,guard)?undefined:predicate,3))},lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)},lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)},lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn)},lodash.forInRight=function(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn)},lodash.forOwn=function(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))},lodash.forOwnRight=function(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))},lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=function(object,path){return null!=object&&hasPath(object,path,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function(collection,value,fromIndex,length){return collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!length?toInteger(fromIndex):0,length=collection.length,fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?fromIndex<=length&&-1<collection.indexOf(value,fromIndex):!!length&&-1<baseIndexOf(collection,value,fromIndex)},lodash.indexOf=function(array,value,index){var length=null==array?0:array.length;return length?(index=null==index?0:toInteger(index),baseIndexOf(array,value,index=index<0?nativeMax(length+index,0):index)):-1},lodash.inRange=function(number,start,end){return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),function(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}(number=toNumber(number),start,end)},lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function(value){return!0===value||!1===value||isObjectLike(value)&&baseGetTag(value)==boolTag},lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=function(value){return isObjectLike(value)&&1===value.nodeType&&!isPlainObject(value)},lodash.isEmpty=function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var key,tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(key in value)if(hasOwnProperty.call(value,key))return!1;return!0},lodash.isEqual=function(value,other){return baseIsEqual(value,other)},lodash.isEqualWith=function(value,other,customizer){var result=(customizer="function"==typeof customizer?customizer:undefined)?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result},lodash.isError=isError,lodash.isFinite=function(value){return"number"==typeof value&&nativeIsFinite(value)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=function(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))},lodash.isMatchWith=function(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)},lodash.isNaN=function(value){return isNumber(value)&&value!=+value},lodash.isNative=function(value){if(isMaskable(value))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return baseIsNative(value)},lodash.isNil=function(value){return null==value},lodash.isNull=function(value){return null===value},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=function(value){return isInteger(value)&&-9007199254740991<=value&&value<=9007199254740991},lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=function(value){return value===undefined},lodash.isWeakMap=function(value){return isObjectLike(value)&&getTag(value)==weakMapTag},lodash.isWeakSet=function(value){return isObjectLike(value)&&"[object WeakSet]"==baseGetTag(value)},lodash.join=function(array,separator){return null==array?"":nativeJoin.call(array,separator)},lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=function(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length;return fromIndex!==undefined&&(index=(index=toInteger(fromIndex))<0?nativeMax(length+index,0):nativeMin(index,length-1)),value==value?function(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)},lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=function(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined},lodash.maxBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined},lodash.mean=function(array){return baseMean(array,identity)},lodash.meanBy=function(array,iteratee){return baseMean(array,getIteratee(iteratee,2))},lodash.min=function(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined},lodash.minBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function(){return{}},lodash.stubString=function(){return""},lodash.stubTrue=function(){return!0},lodash.multiply=multiply,lodash.nth=function(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined},lodash.noConflict=function(){return root._===this&&(root._=oldDash),this},lodash.noop=noop,lodash.now=now,lodash.pad=function(string,length,chars){string=toString(string);var mid=(length=toInteger(length))?stringSize(string):0;return!length||length<=mid?string:createPadding(nativeFloor(mid=(length-mid)/2),chars)+string+createPadding(nativeCeil(mid),chars)},lodash.padEnd=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string},lodash.padStart=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string},lodash.parseInt=function(string,radix,guard){return radix=guard||null==radix?0:radix&&+radix,nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)},lodash.random=function(lower,upper,rand){var temp;if(rand&&"boolean"!=typeof rand&&isIterateeCall(lower,upper,rand)&&(upper=rand=undefined),rand===undefined&&("boolean"==typeof upper?(rand=upper,upper=undefined):"boolean"==typeof lower&&(rand=lower,lower=undefined)),lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),upper<lower&&(temp=lower,lower=upper,upper=temp),rand||lower%1||upper%1){rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)},lodash.reduce=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)},lodash.reduceRight=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)},lodash.repeat=function(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),baseRepeat(toString(string),n)},lodash.replace=function(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])},lodash.result=function(object,path,defaultValue){var index=-1,length=(path=castPath(path,object)).length;for(length||(length=1,object=undefined);++index<length;){var value=null==object?undefined:object[toKey(path[index])];value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object},lodash.round=round,lodash.runInContext=runInContext,lodash.sample=function(collection){return(isArray(collection)?arraySample:baseSample)(collection)},lodash.size=function(collection){if(null==collection)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length},lodash.snakeCase=snakeCase,lodash.some=function(collection,predicate,guard){return(isArray(collection)?arraySome:baseSome)(collection,getIteratee(predicate=guard&&isIterateeCall(collection,predicate,guard)?undefined:predicate,3))},lodash.sortedIndex=function(array,value){return baseSortedIndex(array,value)},lodash.sortedIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))},lodash.sortedIndexOf=function(array,value){var length=null==array?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1},lodash.sortedLastIndex=function(array,value){return baseSortedIndex(array,value,!0)},lodash.sortedLastIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)},lodash.sortedLastIndexOf=function(array,value){if(null==array?0:array.length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1},lodash.startCase=startCase,lodash.startsWith=function(string,target,position){return string=toString(string),position=null==position?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target},lodash.subtract=subtract,lodash.sum=function(array){return array&&array.length?baseSum(array,identity):0},lodash.sumBy=function(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0},lodash.template=function(string,result,guard){var reDelimiters=lodash.templateSettings;guard&&isIterateeCall(string,result,guard)&&(result=undefined),string=toString(string),result=assignInWith({},result,reDelimiters,customDefaultsAssignIn);var isEscaping,isEvaluating,importsKeys=keys(reDelimiters=assignInWith({},result.imports,reDelimiters.imports,customDefaultsAssignIn)),importsValues=baseValues(reDelimiters,importsKeys),index=0,reDelimiters=result.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((result.escape||reNoMatch).source+"|"+reDelimiters.source+"|"+(reDelimiters===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(result.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in result?result.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";if(string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue=interpolateValue||esTemplateValue,source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n",(result=result.variable)||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(result||"obj")+") {\n"+(result?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}",(result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)})).source=source,isError(result))throw result;return result},lodash.times=function(n,iteratee){if((n=toInteger(n))<1||9007199254740991<n)return[];var index=4294967295,result=nativeMin(n,4294967295);for(n-=4294967295,result=baseTimes(result,iteratee=getIteratee(iteratee));++index<n;)iteratee(index);return result},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function(value){return toString(value).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function(value){return value?baseClamp(toInteger(value),-9007199254740991,9007199254740991):0===value?value:0},lodash.toString=toString,lodash.toUpper=function(value){return toString(value).toUpperCase()},lodash.trim=function(strSymbols,chrSymbols,guard){return(strSymbols=toString(strSymbols))&&(guard||chrSymbols===undefined)?strSymbols.replace(reTrim,""):strSymbols&&(chrSymbols=baseToString(chrSymbols))?(strSymbols=stringToArray(strSymbols),chrSymbols=stringToArray(chrSymbols),castSlice(strSymbols,charsStartIndex(strSymbols,chrSymbols),charsEndIndex(strSymbols,chrSymbols)+1).join("")):strSymbols},lodash.trimEnd=function(strSymbols,chars,guard){return(strSymbols=toString(strSymbols))&&(guard||chars===undefined)?strSymbols.replace(reTrimEnd,""):strSymbols&&(chars=baseToString(chars))?castSlice(strSymbols=stringToArray(strSymbols),0,charsEndIndex(strSymbols,stringToArray(chars))+1).join(""):strSymbols},lodash.trimStart=function(strSymbols,chars,guard){return(strSymbols=toString(strSymbols))&&(guard||chars===undefined)?strSymbols.replace(reTrimStart,""):strSymbols&&(chars=baseToString(chars))?castSlice(strSymbols=stringToArray(strSymbols),charsStartIndex(strSymbols,stringToArray(chars))).join(""):strSymbols},lodash.truncate=function(string,index){var separator,result=30,omission="...";isObject(index)&&(separator="separator"in index?index.separator:separator,result="length"in index?toInteger(index.length):result,omission="omission"in index?baseToString(index.omission):omission);var strSymbols,index=(string=toString(string)).length;if((index=hasUnicode(string)?(strSymbols=stringToArray(string)).length:index)<=result)return string;if((index=result-stringSize(omission))<1)return omission;if(result=strSymbols?castSlice(strSymbols,0,index).join(""):string.slice(0,index),separator===undefined)return result+omission;if(strSymbols&&(index+=result.length-index),isRegExp(separator)){if(string.slice(index).search(separator)){var match,substring=result;for((separator=!separator.global?RegExp(separator.source,toString(reFlags.exec(separator))+"g"):separator).lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result=result.slice(0,newEnd===undefined?index:newEnd)}}else string.indexOf(baseToString(separator),index)==index||-1<(index=result.lastIndexOf(separator))&&(result=result.slice(0,index));return result+omission},lodash.unescape=function(string){return(string=toString(string))&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string},lodash.uniqueId=function(prefix){var id=++idCounter;return toString(prefix)+id},lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,(source={},baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source),{chain:!1}),lodash.VERSION="4.17.5",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,4294967295),type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=1==type||3==type;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return"function"==typeof path?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(0<start||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined?(end=toInteger(end))<0?result.dropRight(-end):result.take(end-start):result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(4294967295)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){function interceptor(result){return result=lodashFunc.apply(lodash,arrayPush([result],args)),isTaker&&chainAll?result[0]:result}var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,isUnwrapped=args[0],useLazy=isLazy||isArray(value);useLazy&&checkIteratee&&"function"==typeof isUnwrapped&&1!=isUnwrapped.length&&(isLazy=useLazy=!1);var chainAll=this.__chain__,onlyLazy=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!onlyLazy;if(retUnwrapped||!useLazy)return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result);var value=onlyLazy?value:new LazyWrapper(this),result=func.apply(value,args);return result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(!retUnwrapped||this.__chain__)return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)});var value=this.value();return func.apply(isArray(value)?value:[],args)}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var key,lodashFunc=lodash[methodName];lodashFunc&&(key=lodashFunc.name+"",(realNames[key]||(realNames[key]=[])).push({name:methodName,func:lodashFunc}))}),realNames[createHybrid(undefined,2).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=function(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result},LazyWrapper.prototype.reverse=function(){var result;return this.__filtered__?((result=new LazyWrapper(this)).__dir__=-1,result.__filtered__=!0):(result=this.clone()).__dir__*=-1,result},LazyWrapper.prototype.value=function(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,end=function(start,end,transforms){var index=-1,length=transforms.length;for(;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}(0,arrLength,this.__views__),start=end.start,length=(end=end.end)-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:for(;length--&&resIndex<takeCount;){for(var iterIndex=-1,value=array[index+=dir];++iterIndex<iterLength;){var type=iteratees[iterIndex],computed=type.iteratee,type=type.type,computed=computed(value);if(2==type)value=computed;else if(!computed){if(1==type)continue outer;break outer}}result[resIndex++]=value}return result},lodash.prototype.at=wrapperAt,lodash.prototype.chain=function(){return chain(this)},lodash.prototype.commit=function(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function(){this.__values__===undefined&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length;return{done:done,value:done?undefined:this.__values__[this.__index__++]}},lodash.prototype.plant=function(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone;var previous=clone,parent=parent.__wrapped__}return previous.__wrapped__=value,result},lodash.prototype.reverse=function(){var wrapped=this.__wrapped__;if(wrapped instanceof LazyWrapper){wrapped=wrapped;return(wrapped=(wrapped=this.__actions__.length?new LazyWrapper(this):wrapped).reverse()).__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=function(){return this}),lodash}();"function"==typeof undefined&&"object"==typeof undefined.amd&&undefined.amd?(root._=_,undefined(function(){return _})):freeModule?((freeModule.exports=_)._=_,freeExports._=_):root._=_}.call(commonjsGlobal)}(module={exports:{}},module.exports),module.exports);try{prim_1=floydWarshall_1}catch(e){}var lodash_1=prim_1=prim_1||window._,graph=Graph,DEFAULT_EDGE_NAME="\0",GRAPH_NODE="\0",EDGE_KEY_DELIM="";function Graph(opts){this._isDirected=!lodash_1.has(opts,"directed")||opts.directed,this._isMultigraph=!!lodash_1.has(opts,"multigraph")&&opts.multigraph,this._isCompound=!!lodash_1.has(opts,"compound")&&opts.compound,this._label=void 0,this._defaultNodeLabelFn=lodash_1.constant(void 0),this._defaultEdgeLabelFn=lodash_1.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[GRAPH_NODE]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function incrementOrInitEntry(map$$1,k){map$$1[k]?map$$1[k]++:map$$1[k]=1}function decrementOrRemoveEntry(map$$1,k){--map$$1[k]||delete map$$1[k]}function edgeArgsToId(tmp,v,w,name){v=""+v,w=""+w;return!tmp&&w<v&&(tmp=v,v=w,w=tmp),v+EDGE_KEY_DELIM+w+EDGE_KEY_DELIM+(lodash_1.isUndefined(name)?DEFAULT_EDGE_NAME:name)}function edgeObjToId(isDirected,edgeObj){return edgeArgsToId(isDirected,edgeObj.v,edgeObj.w,edgeObj.name)}Graph.prototype._nodeCount=0,Graph.prototype._edgeCount=0,Graph.prototype.isDirected=function(){return this._isDirected},Graph.prototype.isMultigraph=function(){return this._isMultigraph},Graph.prototype.isCompound=function(){return this._isCompound},Graph.prototype.setGraph=function(label){return this._label=label,this},Graph.prototype.graph=function(){return this._label},Graph.prototype.setDefaultNodeLabel=function(newDefault){return lodash_1.isFunction(newDefault)||(newDefault=lodash_1.constant(newDefault)),this._defaultNodeLabelFn=newDefault,this},Graph.prototype.nodeCount=function(){return this._nodeCount},Graph.prototype.nodes=function(){return lodash_1.keys(this._nodes)},Graph.prototype.sources=function(){var self=this;return lodash_1.filter(this.nodes(),function(v){return lodash_1.isEmpty(self._in[v])})},Graph.prototype.sinks=function(){var self=this;return lodash_1.filter(this.nodes(),function(v){return lodash_1.isEmpty(self._out[v])})},Graph.prototype.setNodes=function(vs,value){var args=arguments,self=this;return lodash_1.each(vs,function(v){1<args.length?self.setNode(v,value):self.setNode(v)}),this},Graph.prototype.setNode=function(v,value){return lodash_1.has(this._nodes,v)?1<arguments.length&&(this._nodes[v]=value):(this._nodes[v]=1<arguments.length?value:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]=GRAPH_NODE,this._children[v]={},this._children[GRAPH_NODE][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount),this},Graph.prototype.node=function(v){return this._nodes[v]},Graph.prototype.hasNode=function(v){return lodash_1.has(this._nodes,v)},Graph.prototype.removeNode=function(v){var removeEdge,self=this;return lodash_1.has(this._nodes,v)&&(removeEdge=function(e){self.removeEdge(self._edgeObjs[e])},delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],lodash_1.each(this.children(v),function(child){self.setParent(child)}),delete this._children[v]),lodash_1.each(lodash_1.keys(this._in[v]),removeEdge),delete this._in[v],delete this._preds[v],lodash_1.each(lodash_1.keys(this._out[v]),removeEdge),delete this._out[v],delete this._sucs[v],--this._nodeCount),this},Graph.prototype.setParent=function(v,parent){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(lodash_1.isUndefined(parent))parent=GRAPH_NODE;else{for(var ancestor=parent+="";!lodash_1.isUndefined(ancestor);ancestor=this.parent(ancestor))if(ancestor===v)throw new Error("Setting "+parent+" as parent of "+v+" would create a cycle");this.setNode(parent)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=parent,this._children[parent][v]=!0,this},Graph.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},Graph.prototype.parent=function(parent){if(this._isCompound){parent=this._parent[parent];if(parent!==GRAPH_NODE)return parent}},Graph.prototype.children=function(children){if(lodash_1.isUndefined(children)&&(children=GRAPH_NODE),!this._isCompound)return children===GRAPH_NODE?this.nodes():this.hasNode(children)?[]:void 0;children=this._children[children];return children?lodash_1.keys(children):void 0},Graph.prototype.predecessors=function(predsV){predsV=this._preds[predsV];if(predsV)return lodash_1.keys(predsV)},Graph.prototype.successors=function(sucsV){sucsV=this._sucs[sucsV];if(sucsV)return lodash_1.keys(sucsV)},Graph.prototype.neighbors=function(v){var preds=this.predecessors(v);if(preds)return lodash_1.union(preds,this.successors(v))},Graph.prototype.isLeaf=function(neighbors){neighbors=this.isDirected()?this.successors(neighbors):this.neighbors(neighbors);return 0===neighbors.length},Graph.prototype.filterNodes=function(filter){var copy=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});copy.setGraph(this.graph());var self=this;lodash_1.each(this._nodes,function(value,v){filter(v)&&copy.setNode(v,value)}),lodash_1.each(this._edgeObjs,function(e){copy.hasNode(e.v)&&copy.hasNode(e.w)&&copy.setEdge(e,self.edge(e))});var parents={};return this._isCompound&&lodash_1.each(copy.nodes(),function(v){copy.setParent(v,function findParent(v){var parent=self.parent(v);return void 0===parent||copy.hasNode(parent)?parents[v]=parent:parent in parents?parents[parent]:findParent(parent)}(v))}),copy},Graph.prototype.setDefaultEdgeLabel=function(newDefault){return lodash_1.isFunction(newDefault)||(newDefault=lodash_1.constant(newDefault)),this._defaultEdgeLabelFn=newDefault,this},Graph.prototype.edgeCount=function(){return this._edgeCount},Graph.prototype.edges=function(){return lodash_1.values(this._edgeObjs)},Graph.prototype.setPath=function(vs,value){var self=this,args=arguments;return lodash_1.reduce(vs,function(v,w){return 1<args.length?self.setEdge(v,w,value):self.setEdge(v,w),w}),this},Graph.prototype.setEdge=function(){var value,valueSpecified=!1,e=arguments[0];"object"==typeof e&&null!==e&&"v"in e?(v=e.v,w=e.w,edgeObj=e.name,2===arguments.length&&(value=arguments[1],valueSpecified=!0)):(v=e,w=arguments[1],edgeObj=arguments[3],2<arguments.length&&(value=arguments[2],valueSpecified=!0)),v=""+v,w=""+w,lodash_1.isUndefined(edgeObj)||(edgeObj=""+edgeObj);e=edgeArgsToId(this._isDirected,v,w,edgeObj);if(lodash_1.has(this._edgeLabels,e))return valueSpecified&&(this._edgeLabels[e]=value),this;if(!lodash_1.isUndefined(edgeObj)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(w),this._edgeLabels[e]=valueSpecified?value:this._defaultEdgeLabelFn(v,w,edgeObj);var edgeObj=function(tmp,v,edgeObj,name){v=""+v,edgeObj=""+edgeObj;!tmp&&edgeObj<v&&(tmp=v,v=edgeObj,edgeObj=tmp);edgeObj={v:v,w:edgeObj};name&&(edgeObj.name=name);return edgeObj}(this._isDirected,v,w,edgeObj),v=edgeObj.v,w=edgeObj.w;return Object.freeze(edgeObj),this._edgeObjs[e]=edgeObj,incrementOrInitEntry(this._preds[w],v),incrementOrInitEntry(this._sucs[v],w),this._in[w][e]=edgeObj,this._out[v][e]=edgeObj,this._edgeCount++,this},Graph.prototype.edge=function(v,w,e){e=1===arguments.length?edgeObjToId(this._isDirected,v):edgeArgsToId(this._isDirected,v,w,e);return this._edgeLabels[e]},Graph.prototype.hasEdge=function(v,w,e){e=1===arguments.length?edgeObjToId(this._isDirected,v):edgeArgsToId(this._isDirected,v,w,e);return lodash_1.has(this._edgeLabels,e)},Graph.prototype.removeEdge=function(v,w,edge){var e=1===arguments.length?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,edge),edge=this._edgeObjs[e];return edge&&(v=edge.v,w=edge.w,delete this._edgeLabels[e],delete this._edgeObjs[e],decrementOrRemoveEntry(this._preds[w],v),decrementOrRemoveEntry(this._sucs[v],w),delete this._in[w][e],delete this._out[v][e],this._edgeCount--),this},Graph.prototype.inEdges=function(edges,u){edges=this._in[edges];if(edges){edges=lodash_1.values(edges);return u?lodash_1.filter(edges,function(edge){return edge.v===u}):edges}},Graph.prototype.outEdges=function(edges,w){edges=this._out[edges];if(edges){edges=lodash_1.values(edges);return w?lodash_1.filter(edges,function(edge){return edge.w===w}):edges}},Graph.prototype.nodeEdges=function(v,w){var inEdges=this.inEdges(v,w);if(inEdges)return inEdges.concat(this.outEdges(v,w))};var graphlib={Graph:graph,version:"2.1.5"},json={write:function(g){var json={options:{directed:g.isDirected(),multigraph:g.isMultigraph(),compound:g.isCompound()},nodes:function(g){return lodash_1.map(g.nodes(),function(node){var nodeValue=g.node(node),parent=g.parent(node),node={v:node};return lodash_1.isUndefined(nodeValue)||(node.value=nodeValue),lodash_1.isUndefined(parent)||(node.parent=parent),node})}(g),edges:function(g){return lodash_1.map(g.edges(),function(e){var edgeValue=g.edge(e),edge={v:e.v,w:e.w};return lodash_1.isUndefined(e.name)||(edge.name=e.name),lodash_1.isUndefined(edgeValue)||(edge.value=edgeValue),edge})}(g)};lodash_1.isUndefined(g.graph())||(json.value=lodash_1.clone(g.graph()));return json},read:function(json){var g=new graph(json.options).setGraph(json.value);return lodash_1.each(json.nodes,function(entry){g.setNode(entry.v,entry.value),entry.parent&&g.setParent(entry.v,entry.parent)}),lodash_1.each(json.edges,function(entry){g.setEdge({v:entry.v,w:entry.w,name:entry.name},entry.value)}),g}};function components_1(g){var cmpt,visited={},cmpts=[];function dfs(v){lodash_1.has(visited,v)||(visited[v]=!0,cmpt.push(v),lodash_1.each(g.successors(v),dfs),lodash_1.each(g.predecessors(v),dfs))}return lodash_1.each(g.nodes(),function(v){cmpt=[],dfs(v),cmpt.length&&cmpts.push(cmpt)}),cmpts}var priorityQueue=PriorityQueue;function PriorityQueue(){this._arr=[],this._keyIndices={}}PriorityQueue.prototype.size=function(){return this._arr.length},PriorityQueue.prototype.keys=function(){return this._arr.map(function(x){return x.key})},PriorityQueue.prototype.has=function(key){return lodash_1.has(this._keyIndices,key)},PriorityQueue.prototype.priority=function(index){index=this._keyIndices[index];if(void 0!==index)return this._arr[index].priority},PriorityQueue.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},PriorityQueue.prototype.add=function(key,priority){var keyIndices=this._keyIndices;if(key=String(key),lodash_1.has(keyIndices,key))return!1;var arr=this._arr,index=arr.length;return keyIndices[key]=index,arr.push({key:key,priority:priority}),this._decrease(index),!0},PriorityQueue.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var min$$1=this._arr.pop();return delete this._keyIndices[min$$1.key],this._heapify(0),min$$1.key},PriorityQueue.prototype.decrease=function(key,priority){var index=this._keyIndices[key];if(priority>this._arr[index].priority)throw new Error("New priority is greater than current priority. Key: "+key+" Old: "+this._arr[index].priority+" New: "+priority);this._arr[index].priority=priority,this._decrease(index)},PriorityQueue.prototype._heapify=function(i){var arr=this._arr,l=2*i,r=1+l,largest=i;l<arr.length&&(largest=arr[l].priority<arr[largest].priority?l:largest,(largest=r<arr.length?arr[r].priority<arr[largest].priority?r:largest:largest)!==i&&(this._swap(i,largest),this._heapify(largest)))},PriorityQueue.prototype._decrease=function(index){for(var parent,arr=this._arr,priority=arr[index].priority;0!==index&&!(arr[parent=index>>1].priority<priority);)this._swap(index,parent),index=parent},PriorityQueue.prototype._swap=function(i,j){var arr=this._arr,keyIndices=this._keyIndices,origArrI=arr[i],origArrJ=arr[j];arr[i]=origArrJ,arr[j]=origArrI,keyIndices[origArrJ.key]=i,keyIndices[origArrI.key]=j};var dijkstra_1=function(g,source,weightFn,edgeFn){return function(g,source,weightFn,edgeFn){function updateNeighbors(edge){var w=edge.v!==v?edge.v:edge.w,wEntry=results[w],weight=weightFn(edge),distance=vEntry.distance+weight;if(weight<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+edge+" Weight: "+weight);distance<wEntry.distance&&(wEntry.distance=distance,wEntry.predecessor=v,pq.decrease(w,distance))}var v,vEntry,results={},pq=new priorityQueue;g.nodes().forEach(function(v){var distance=v===source?0:Number.POSITIVE_INFINITY;results[v]={distance:distance},pq.add(v,distance)});for(;0<pq.size()&&(v=pq.removeMin(),(vEntry=results[v]).distance!==Number.POSITIVE_INFINITY);)edgeFn(v).forEach(updateNeighbors);return results}(g,String(source),weightFn||DEFAULT_WEIGHT_FUNC,edgeFn||function(v){return g.outEdges(v)})},DEFAULT_WEIGHT_FUNC=lodash_1.constant(1);function dijkstraAll_1(g,weightFunc,edgeFunc){return lodash_1.transform(g.nodes(),function(acc,v){acc[v]=dijkstra_1(g,v,weightFunc,edgeFunc)},{})}var tarjan_1=function(g){var index=0,stack=[],visited={},results=[];return g.nodes().forEach(function(v){lodash_1.has(visited,v)||!function dfs(v){var entry=visited[v]={onStack:!0,lowlink:index,index:index++};if(stack.push(v),g.successors(v).forEach(function(w){lodash_1.has(visited,w)?visited[w].onStack&&(entry.lowlink=Math.min(entry.lowlink,visited[w].index)):(dfs(w),entry.lowlink=Math.min(entry.lowlink,visited[w].lowlink))}),entry.lowlink===entry.index){for(var w,cmpt=[];w=stack.pop(),visited[w].onStack=!1,cmpt.push(w),v!==w;);results.push(cmpt)}}(v)}),results};function findCycles_1(g){return lodash_1.filter(tarjan_1(g),function(cmpt){return 1<cmpt.length||1===cmpt.length&&g.hasEdge(cmpt[0],cmpt[0])})}var floydWarshall_1=function(g,weightFn,edgeFn){return function(g,weightFn,edgeFn){var results={},nodes=g.nodes();return nodes.forEach(function(v){results[v]={},results[v][v]={distance:0},nodes.forEach(function(w){v!==w&&(results[v][w]={distance:Number.POSITIVE_INFINITY})}),edgeFn(v).forEach(function(d){var w=d.v===v?d.w:d.v,d=weightFn(d);results[v][w]={distance:d,predecessor:v}})}),nodes.forEach(function(k){var rowK=results[k];nodes.forEach(function(i){var rowI=results[i];nodes.forEach(function(ij){var altDistance=rowI[k],kj=rowK[ij],ij=rowI[ij],altDistance=altDistance.distance+kj.distance;altDistance<ij.distance&&(ij.distance=altDistance,ij.predecessor=kj.predecessor)})})}),results}(g,weightFn||DEFAULT_WEIGHT_FUNC$1,edgeFn||function(v){return g.outEdges(v)})},DEFAULT_WEIGHT_FUNC$1=lodash_1.constant(1);var topsort_1=topsort;function topsort(g){var visited={},stack={},results=[];if(lodash_1.each(g.sinks(),function visit(node){if(lodash_1.has(stack,node))throw new CycleException;lodash_1.has(visited,node)||(stack[node]=!0,visited[node]=!0,lodash_1.each(g.predecessors(node),visit),delete stack[node],results.push(node))}),lodash_1.size(visited)!==g.nodeCount())throw new CycleException;return results}function CycleException(){}topsort.CycleException=CycleException;var dfs_1=function(g,vs,order){lodash_1.isArray(vs)||(vs=[vs]);var navigation=(g.isDirected()?g.successors:g.neighbors).bind(g),acc=[],visited={};return lodash_1.each(vs,function(v){if(!g.hasNode(v))throw new Error("Graph does not have node: "+v);!function doDfs(g,v,postorder,visited,navigation,acc){lodash_1.has(visited,v)||(visited[v]=!0,postorder||acc.push(v),lodash_1.each(navigation(v),function(w){doDfs(g,w,postorder,visited,navigation,acc)}),postorder&&acc.push(v))}(g,v,"post"===order,visited,navigation,acc)}),acc};var prim_1=function(g,weightFunc){var v,result=new graph,parents={},pq=new priorityQueue;function updateNeighbors(edgeWeight){var w=edgeWeight.v===v?edgeWeight.w:edgeWeight.v,pri=pq.priority(w);void 0===pri||(edgeWeight=weightFunc(edgeWeight))<pri&&(parents[w]=v,pq.decrease(w,edgeWeight))}if(0===g.nodeCount())return result;lodash_1.each(g.nodes(),function(v){pq.add(v,Number.POSITIVE_INFINITY),result.setNode(v)}),pq.decrease(g.nodes()[0],0);var init=!1;for(;0<pq.size();){if(v=pq.removeMin(),lodash_1.has(parents,v))result.setEdge(v,parents[v]);else{if(init)throw new Error("Input graph is not connected: "+g);init=!0}g.nodeEdges(v).forEach(updateNeighbors)}return result};var graphlib={Graph:graphlib.Graph,json:json,alg:{components:components_1,dijkstra:dijkstra_1,dijkstraAll:dijkstraAll_1,findCycles:findCycles_1,floydWarshall:floydWarshall_1,isAcyclic:function(g){try{topsort_1(g)}catch(e){if(e instanceof topsort_1.CycleException)return!1;throw e}return!0},postorder:function(g,vs){return dfs_1(g,vs,"post")},preorder:function(g,vs){return dfs_1(g,vs,"pre")},prim:prim_1,tarjan:tarjan_1,topsort:topsort_1},version:graphlib.version},graphlib_1=graphlib.Graph,graphlib_3=graphlib.alg;function groupedGraph(G,rankSets){void 0===rankSets&&(rankSets=[]);var GG=new graphlib_1({directed:!0});if(0===G.nodes().length)return GG;rankSets=function(G,rankSets){for(var i=0;i<rankSets.length;++i)if("min"===rankSets[i].type)return rankSets;var sources=G.sources();return[{type:"min",nodes:[(sources.length?sources:G.nodes())[0]]}].concat(rankSets)}(G,rankSets);for(var set$$1,id,j,nodeSets=d3Collection.map(),i=0;i<rankSets.length;++i)if((set$$1=rankSets[i]).nodes&&0!==set$$1.nodes.length){for(id=""+i,j=0;j<set$$1.nodes.length;++j)nodeSets.set(set$$1.nodes[j],id);GG.setNode(id,{type:set$$1.type,nodes:set$$1.nodes})}G.nodes();return G.nodes().forEach(function(u){G.node(u);nodeSets.has(u)||(id=""+i++,set$$1={type:"same",nodes:[u]},nodeSets.set(u,id),GG.setNode(id,set$$1))}),G.edges().forEach(function(e){G.edge(e);var sourceSet=nodeSets.get(e.v),targetSet=nodeSets.get(e.w),edge=GG.edge(sourceSet,targetSet)||{delta:0};sourceSet===targetSet?(edge.delta=0,GG.setEdge(sourceSet,targetSet,edge)):G.node(e.v).backwards?(edge.delta=Math.max(edge.delta,G.node(e.w).backwards?1:0),GG.setEdge(targetSet,sourceSet,edge)):(edge.delta=Math.max(edge.delta,G.node(e.w).backwards?0:1),GG.setEdge(sourceSet,targetSet,edge))}),GG}function makeAcyclic(G,v0){var tree=function(G,v0){var visited=d3Collection.set(),tree=new graphlib_1({directed:!0}),thread=[];if(G.hasNode(v0))return doDfs$1(G,v0,visited,tree,thread),G.nodes().forEach(function(u){visited.has(u)||doDfs$1(G,u,visited,tree,thread)}),thread.forEach(function(u,i){tree.node(u).thread=i+1<thread.length?thread[i+1]:thread[0]}),tree;throw Error("node not in graph")}(G,v0);return G.edges().forEach(function(e){var label;(function(tree,v,w){var V=tree.node(v),W=tree.node(w);if(V.depth<W.depth)for(var u=V.thread;tree.node(u).depth>V.depth;){if(u===w)return 1;u=tree.node(u).thread}else if(W.depth<V.depth)for(var u$1=W.thread;tree.node(u$1).depth>W.depth;){if(u$1===v)return-1;u$1=tree.node(u$1).thread}return 0})(tree,e.v,e.w)<0&&((label=G.edge(e)||{}).reversed=!0,G.removeEdge(e),G.setEdge(e.w,e.v,label))}),G}function doDfs$1(G,v,visited,tree,thread,depth){void 0===depth&&(depth=0),visited.has(v)||(visited.add(v),thread.push(v),tree.setNode(v,{depth:depth}),G.outEdges(v).map(function(e){return e.w}).forEach(function(w,i){visited.has(w)||tree.setEdge(v,w,{delta:1}),doDfs$1(G,w,visited,tree,thread,depth+1)}))}function assignInitialRanks(G){var queue=G.sources(),seen=d3Collection.set(),marked=d3Collection.set();G.edges().forEach(function(e){e.v===e.w&&marked.add(edgeIdString(e))}),G.nodes().forEach(function(v){G.node(v).rank=0});for(;0<queue.length;)!function(){var v=queue.shift();seen.add(v);var V=G.node(v);V||G.setNode(v,V={}),V.rank=0,G.inEdges(v).forEach(function(e){var delta=void 0===G.edge(e).delta?1:G.edge(e).delta;V.rank=Math.max(V.rank,G.node(e.v).rank+delta)}),G.outEdges(v).forEach(function(e){marked.add(edgeIdString(e))}),G.nodes().forEach(function(n){queue.indexOf(n)<0&&!seen.has(n)&&!G.inEdges(n).some(function(e){return!marked.has(edgeIdString(e))})&&queue.push(n)})}()}function edgeIdString(e){return e.v+""+e.w+""+e.name}function assignRanks(G,rankSets){var GG=groupedGraph(G,rankSets);0!==GG.nodeCount()&&(function(GG){GG.sources().forEach(function(u){"0"!==u&&GG.setEdge("0",u,{temp:!0,delta:0})})}(GG),makeAcyclic(GG,"0"),assignInitialRanks(GG),function(GG){GG.edges().forEach(function(V){var rank;GG.edge(V).temp&&(rank=V.w,V=GG.node(rank),void 0!==(rank=d3Array.min(GG.outEdges(rank),function(e){return GG.node(e.w).rank-GG.edge(e).delta}))&&(V.rank=rank))})}(GG),GG.nodes().forEach(function(u){var groupedNode=GG.node(u);groupedNode.nodes.forEach(function(v){G.node(v).rank=groupedNode.rank})}))}function countCrossings(G,orderA,orderB){return function(G,orderA,orderB){var north,south,q;south=orderA.length>orderB.length?(north=orderA,orderB):(north=orderB,orderA);q=south.length;var southSeq=[];north.forEach(function(u){south.forEach(function(v,j){(G.hasEdge(u,v)||G.hasEdge(v,u))&&southSeq.push(j)})});var firstIndex=1;for(;firstIndex<q;)firstIndex*=2;var treeSize=2*firstIndex-1;--firstIndex;for(var tree=new Array(treeSize),i=0;i<treeSize;i++)tree[i]=0;var count=0;return southSeq.forEach(function(k){var index=k+firstIndex;for(tree[index]++;0<index;)index%2&&(count+=tree[index+1]),index=Math.floor((index-1)/2),tree[index]++}),count}(G,orderA,orderB)}function allCrossings$1(G,order,i){var count=0;return 0<i&&(count+=countCrossings(G,order[i-1],order[i])),i+1<order.length&&(count+=countCrossings(G,order[i],order[i+1])),count}function transpose(list,i,j){var tmp=list[i];list[i]=list[j],list[j]=tmp}function medianValue(positions){var m=Math.floor(positions.length/2);if(0===positions.length)return-1;if(positions.length%2==1)return positions[m];if(2===positions.length)return(positions[0]+positions[1])/2;var left=positions[m-1]-positions[0],right=positions[positions.length-1]-positions[m];return(positions[m-1]*right+positions[m]*left)/(left+right)}function neighbourPositions(G,order,thisRank,otherRank,u,includeLoops){void 0===includeLoops&&(includeLoops=!1);var thisRank=order[thisRank],otherRank=order[otherRank],positions=[];return otherRank.forEach(function(n,i){0<G.nodeEdges(n,u).length&&positions.push(i)}),0===positions.length&&includeLoops&&thisRank.forEach(function(n,i){0<G.nodeEdges(n,u).length&&positions.push(i+.5)}),positions.sort(function(a,b){return a-b}),positions}function sortByPositions(arr,order){for(var origOrder=d3Collection.map(arr.map(function(d,i){return[d,i]}),function(d){return d[0]}),i=1;i<arr.length;++i)for(var k=i;0<k;--k){for(var j=k-1,a=order.get(arr[j]),assign=order.get(arr[k]);-1===(a=order.get(arr[j]))&&0<j;)j--;if(-1===assign||-1===a)break;if(a===assign&&(a=origOrder.get(arr[j]),assign=origOrder.get(arr[k])),a<=assign)break;assign=[arr[j],arr[k]],arr[k]=assign[0],arr[j]=assign[1]}}function sortNodes$1(G,order,sweepDirection,includeLoops){if(void 0===includeLoops&&(includeLoops=!1),0<(sweepDirection=void 0===sweepDirection?1:sweepDirection))for(var r=1;r<order.length;++r)!function(r){var medians=d3Collection.map();order[r].forEach(function(u){var neighbour=medianValue(neighbourPositions(G,order,r,r-1,u,includeLoops));medians.set(u,neighbour)}),sortByPositions(order[r],medians)}(r);else for(var r$1=order.length-2;0<=r$1;--r$1)!function(r){var medians$1=d3Collection.map();order[r].forEach(function(u){var neighbour=medianValue(neighbourPositions(G,order,r,r+1,u,includeLoops));medians$1.set(u,neighbour)}),sortByPositions(order[r],medians$1)}(r$1)}function sortNodes(G,maxIterations){void 0===maxIterations&&(maxIterations=25),maxIterations=5;for(var ranks=function(G){var ranks=[];return G.nodes().forEach(function(u){for(var r=G.node(u).rank||0;r>=ranks.length;)ranks.push([]);ranks[r].push(u)}),ranks}(G),order=function(G,ranks){var order=[];if(0===ranks.length)return order;var start=G.sources(),nodeRanks=d3Collection.map();return ranks.forEach(function(nodes,i){order.push([]),nodes.forEach(function(u){0===i&&start.indexOf(u)<0&&start.push(u),nodeRanks.set(u,i)})}),graphlib_3.preorder(G,start).forEach(function(u){order[nodeRanks.get(u)].push(u)}),order}(G,ranks),best=order,i=0;i++<maxIterations;)sortNodes$1(G,order,i%2==0),function(G,order){for(var improved=!0;improved;)for(var improved=!1,i=0;i<order.length;++i)for(var j=0;j<order[i].length-1;++j){var count0=allCrossings$1(G,order,i);transpose(order[i],j,j+1),allCrossings$1(G,order,i)<count0?improved=!0:transpose(order[i],j,j+1)}}(G,order),allCrossings(G,order)<allCrossings(G,best)&&(best=function(order){var result=[];return order.forEach(function(rank){result.push(rank.map(function(d){return d}))}),result}(order));best.forEach(function(nodes){nodes.forEach(function(u,i){G.node(u).depth=i})})}function allCrossings(G,order){for(var count=0,i=0;i<order.length-1;++i)count+=countCrossings(G,order[i],order[i+1]);return count}function addDummyNodes(G){"object"!=typeof G.graph()&&G.setGraph({}),G.graph().dummyChains=[],G.edges().forEach(function(e){return function(G,e){var v,edge=G.edge(e),dummies=function(source,target){var dummyNodes=[],r=source.rank;if(r+1<=target.rank){for(source.backwards&&dummyNodes.push({rank:r,backwards:!1});++r<target.rank;)dummyNodes.push({rank:r,backwards:!1});target.backwards&&dummyNodes.push({rank:r,backwards:!1})}else if(r>target.rank){for(source.backwards||dummyNodes.push({rank:r,backwards:!0});r-- >target.rank+1;)dummyNodes.push({rank:r,backwards:!0});target.backwards||dummyNodes.push({rank:r,backwards:!0})}return dummyNodes}(G.node(e.v),G.node(e.w));function addDummyEdge(v,w){var label={points:[],value:edge.value,origEdge:e,origLabel:edge};G.setEdge(v,w,label,e.name)}0!==dummies.length&&(G.removeEdge(e),v=e.v,dummies.forEach(function(dummy,i){var id="__"+e.v+"_"+e.w+"_"+i;G.hasNode(id)||(dummy.dummy="edge",G.setNode(id,dummy),0===i&&G.graph().dummyChains.push(id)),addDummyEdge(v,v=id)}),addDummyEdge(v,e.w))}(G,e)})}function nestGraph(nodes){for(var rank,maxRank=d3Array.max(nodes,function(d){return d.rank||0})||0,maxBand=d3Array.max(nodes,function(d){return d.band||0})||0,nested=d3Collection.nest().key(function(d){return d.rank||0}).key(function(d){return d.band||0}).sortValues(function(a,b){return a.depth-b.depth}).map(nodes),result=new Array(maxRank+1),i=0;i<=maxRank;++i)if(result[i]=new Array(maxBand+1),rank=nested.get(i))for(var j=0;j<=maxBand;++j)result[i][j]=rank.get(j)||[];else for(var j$1=0;j$1<=maxBand;++j$1)result[i][j$1]=[];return result.bandValues=function(nested){if(0===nested.length||0===nested[0].length)return[];for(var Nb=nested[0].length,values=new Array(Nb),i=0;i<Nb;i++)values[i]=0;return nested.forEach(function(rank){rank.forEach(function(total,j){total=d3Array.sum(total,function(d){return d.value});values[j]=Math.max(values[j],total)})}),values}(result),result}function defaultSeparation(a,b){return 1}function positionNodesVertically(){var separation=defaultSeparation;function layout(nested,totalHeight,whitespace){nested.forEach(function(layer){var y=0;layer.forEach(function(band,space){var bandHeight=nested.bandValues[space]/d3Array.sum(nested.bandValues)*totalHeight,margin=whitespace*bandHeight/5,height=bandHeight-2*margin,space=d3Array.sum(band,function(d){return d.dy}),gaps=band.map(function(d,i){return d.value&&band[i+1]?separation(band[i],band[i+1],layout):0}),space=Math.max(0,height-space),kg=d3Array.sum(gaps)?space/d3Array.sum(gaps):0,yy=y+margin;1===band.length&&(yy+=(height-band[0].dy)/2);var prevGap=Number.MAX_VALUE;band.forEach(function(node,i){node.y=yy,node.spaceAbove=prevGap,node.spaceBelow=gaps[i]*kg,yy+=node.dy+node.spaceBelow,prevGap=node.spaceBelow,node.data&&void 0!==node.data.forceY&&(node.y=margin+node.data.forceY*(height-node.dy))}),0<band.length&&(band[band.length-1].spaceBelow=Number.MAX_VALUE),y+=bandHeight})})}return layout.separation=function(x){return arguments.length?(separation=function(f){if("function"==typeof f)return f;throw new Error}(x),layout):separation},layout}function prepareNodePorts(G,sortPorts){G.nodes().forEach(function(u){var node=G.node(u),ports=d3Collection.map();function getOrSet(id,port){if(ports.has(id))return ports.get(id);port={id:id,node:node.data,side:port,incoming:[],outgoing:[]};return ports.set(id,port),port}G.inEdges(u).forEach(function(e){var edge=G.edge(e),port=getOrSet(edge.targetPortId||"in","l"!==node.direction?"west":"east");port.incoming.push(e),edge.targetPort=port}),G.outEdges(u).forEach(function(e){var edge=G.edge(e),port=getOrSet(edge.sourcePortId||"out","l"!==node.direction?"east":"west");port.outgoing.push(e),edge.sourcePort=port}),node.ports=ports.values(),node.ports.sort(sortPorts),node.fromElsewhere=node.fromElsewhere||[],node.toElsewhere=node.toElsewhere||[];var fromElsewhereDy=0;node.fromElsewhere.forEach(function(link){link.x1=node.x0,fromElsewhereDy+=link.dy});var y={west:fromElsewhereDy,east:0},i={west:0,east:0};node.ports.forEach(function(port){port.y=y[port.side],port.index=i[port.side],port.dy=Math.max(d3Array.sum(port.incoming,function(e){return G.edge(e).dy}),d3Array.sum(port.outgoing,function(e){return G.edge(e).dy}));var x="west"===port.side?node.x0:node.x1;port.outgoing.forEach(function(link){link=G.edge(link);link.x0=x,link.y0=node.y+port.y+link.dy/2}),port.incoming.forEach(function(link){link=G.edge(link);link.x1=x,link.y1=node.y+port.y+link.dy/2}),y[port.side]+=port.dy,i[port.side]+=1}),node.toElsewhere.forEach(function(link){link.x0=node.x1})})}function linkDirection(G,link,head){if(void 0===head&&(head=!0),link.v===link.w)return Math.PI/2*(head?1:-1);link=G.edge(link);return Math.atan2(link.y1-link.y0,link.x1-link.x0)}function orderEdges(G){G.nodes().forEach(function(u){return function(G,v){var node=G.node(v);node.ports.forEach(function(port){port.incoming.sort(compareDirection(G,0,!1)),port.outgoing.sort(compareDirection(G,0,!0))})}(G,u)})}function compareDirection(G,node,head){return void 0===head&&(head=!0),function(a,b){var da=linkDirection(G,a,head),db=linkDirection(G,b,head),c=head?1:-1;return a.v===b.v&&a.w===b.w&&Math.abs(da-db)<.001?"number"==typeof a.name&&"number"==typeof b.name?a.name-b.name:"string"==typeof a.name&&"string"==typeof b.name?a.name.localeCompare(b.name):0:Math.abs(da-db)<.001?a.w===b.w?G.node(b.v).y-G.node(a.v).y:a.v===b.v?G.node(b.w).y-G.node(a.w).y:0:c*(da-db)}}function findFirst(links,p){for(var jmid=null,j=0;j<links.length;++j)if(p(links[j])){jmid=j;break}return jmid}function sweepCurvatureInwards(links,rr){if(0!==links.length){for(var h,Rmin=0,i=links.length-1;0<=i;--i)h=links[i].dy/2,links[i][rr]-h<Rmin&&(links[i][rr]=Math.min(links[i].Rmax,Rmin+h)),Rmin=links[i][rr]+h;for(var Rmax=links[0].Rmax+links[0].dy/2,i$1=0;i$1<links.length;++i$1)h=links[i$1].dy/2,links[i$1][rr]+h>Rmax&&(links[i$1][rr]=Math.max(h,Rmax-h)),Rmax=links[i$1][rr]-h}}function layoutLinks(G){return function(G){G.nodes().forEach(function(u){var node=G.node(u),sy=node.y,ty=node.y;node.fromElsewhere.forEach(function(link){link.y1=ty+link.dy/2,link.d1=node.backwards?"l":"r",link.dy=link.dy,ty+=link.dy}),node.ports.forEach(function(port){sy=node.y+port.y,ty=node.y+port.y,port.outgoing.forEach(function(link){link=G.edge(link);link.y0=sy+link.dy/2,link.d0=node.backwards?"l":"r",link.dy=link.dy,sy+=link.dy}),port.incoming.forEach(function(link){link=G.edge(link);link.y1=ty+link.dy/2,link.d1=node.backwards?"l":"r",link.dy=link.dy,ty+=link.dy})}),node.toElsewhere.forEach(function(link){link.y0=sy+link.dy/2,link.d0=node.backwards?"l":"r",link.dy=link.dy,sy+=link.dy})})}(G),function(G){G.nodes().forEach(function(node){node=G.node(node);setEdgeEndCurvatures(node.toElsewhere,"r0"),setEdgeEndCurvatures(node.fromElsewhere,"r1"),node.ports.forEach(function(port){setEdgeEndCurvatures(port.outgoing.map(function(e){return G.edge(e)}),"r0"),setEdgeEndCurvatures(port.incoming.map(function(e){return G.edge(e)}),"r1")})})}(G),G}function setEdgeEndCurvatures(links,rr){links.forEach(function(link){link.Rmax=function(link){var Dx=link.x1-link.x0,Dy=link.y1-link.y0;return link.d0!==link.d1?Math.abs(Dy)/2.1:0!=Dy?(Dx*Dx+Dy*Dy)/Math.abs(4*Dy):1/0}(link),link[rr]=Math.max(link.dy/2,link.d0===link.d1?.6*link.Rmax:5+link.dy/2)});var jmid=findFirst(links,"r0"===rr?function(f){return f.y1>f.y0}:function(f){return f.y0>f.y1});if(null===jmid&&(jmid=links.length),sweepCurvatureInwards(links.slice(jmid),rr),0<jmid){for(var links2=[],j=jmid-1;0<=j;j--)links2.push(links[j]);sweepCurvatureInwards(links2,rr)}}function buildGraph(graph,nodeId,nodeBackwards,sourceId,targetId,linkType,linkValue){var G=new graphlib_1({directed:!0,multigraph:!0});return graph.nodes.forEach(function(node,i){var id=nodeId(node,i);if(G.hasNode(id))throw new Error("duplicate: "+id);G.setNode(id,{data:node,index:i,backwards:nodeBackwards(node,i),fromElsewhere:node.fromElsewhere||[],toElsewhere:node.toElsewhere||[],x0:node.x0,x1:node.x1,y:node.y0})}),graph.links.forEach(function(link,i){var v=idAndPort(sourceId(link,i)),w=idAndPort(targetId(link,i)),label={data:link,sourcePortId:v.port,targetPortId:w.port,index:i,points:[],value:linkValue(link,i),type:linkType(link,i)};if(!G.hasNode(v.id))throw new Error("missing: "+v.id);if(!G.hasNode(w.id))throw new Error("missing: "+w.id);G.setEdge(v.id,w.id,label,linkType(link,i))}),G.setGraph({}),G}function idAndPort(x){return"object"==typeof x?x:{id:x,port:void 0}}function defaultNodes(graph){return graph.nodes}function defaultLinks(graph){return graph.links}function defaultNodeId(d){return d.id}function defaultNodeBackwards(d){return d.direction&&"l"===d.direction.toLowerCase()}function defaultSourceId(d){return{id:"object"==typeof d.source?d.source.id:d.source,port:"object"==typeof d.sourcePort?d.sourcePort.id:d.sourcePort}}function defaultTargetId(d){return{id:"object"==typeof d.target?d.target.id:d.target,port:"object"==typeof d.targetPort?d.targetPort.id:d.targetPort}}function defaultLinkType(d){return d.type}function defaultSortPorts(a,b){return a.id.localeCompare(b.id)}function setNodeValues(G,linkValue){G.nodes().forEach(function(outgoing){var d=G.node(outgoing),incoming=d3Array.sum(G.inEdges(outgoing),function(e){return G.edge(e).value}),outgoing=d3Array.sum(G.outEdges(outgoing),function(e){return G.edge(e).value});incoming+=d3Array.sum(d.fromElsewhere||[],function(link){return linkValue(link)}),outgoing+=d3Array.sum(d.toElsewhere|[],function(link){return linkValue(link)}),d.value=Math.max(incoming,outgoing)})}function setWidths(G,scale){G.edges().forEach(function(edge){edge=G.edge(edge);edge.dy=edge.value*scale}),G.nodes().forEach(function(u){var node=G.node(u);node.dy=node.value*scale,node.fromElsewhere=node.fromElsewhere||[],node.toElsewhere=node.toElsewhere||[],node.fromElsewhere.forEach(function(link){link.dy=link.value*scale,link.source={id:"__from_elsewhere_"+u},link.target=node.data}),node.toElsewhere.forEach(function(link){link.dy=link.value*scale,link.source=node.data,link.target={id:"__to_elsewhere_"+u}})})}function required(f){if("function"!=typeof f)throw new Error;return f}function addLinkEndpoints(G){G.edges().forEach(function(edge){edge=G.edge(edge);edge.points.unshift({x:edge.x0,y:edge.y0,ro:edge.r0,d:edge.d0}),edge.points.push({x:edge.x1,y:edge.y1,ri:edge.r1,d:edge.d1})}),G.nodes().forEach(function(node){node=G.node(node);node.fromElsewhere.forEach(function(link){link.points=[{x:link.x1,y:link.y1,ri:link.r1,d:link.d1,style:"down-right"}]}),node.toElsewhere.forEach(function(link){link.points=[{x:link.x0,y:link.y0,ri:link.r0,d:link.d0,style:"right-down"}]})})}function copyResultsToGraph(G){G.nodes().forEach(function(node){node=G.node(node);node.data.incoming=[],node.data.outgoing=[],node.data.ports=node.ports,node.data.ports.forEach(function(port){port.incoming=[],port.outgoing=[]}),node.data.dy=node.dy,node.data.x0=node.x0,node.data.x1=node.x1,node.data.y0=node.y,node.data.y1=node.y+node.dy,node.data.rank=node.rank,node.data.band=node.band,node.data.depth=node.depth,node.data.value=node.value,node.data.spaceAbove=node.spaceAbove,node.data.spaceBelow=node.spaceBelow}),G.edges().forEach(function(e){var edge=G.edge(e);edge.data.source=G.node(e.v).data,edge.data.target=G.node(e.w).data,edge.data.sourcePort=edge.sourcePort,edge.data.targetPort=edge.targetPort,edge.data.source.outgoing.push(edge.data),edge.data.target.incoming.push(edge.data),edge.data.sourcePort&&edge.data.sourcePort.outgoing.push(edge.data),edge.data.targetPort&&edge.data.targetPort.incoming.push(edge.data),edge.data.value=edge.value,edge.data.type=edge.type,edge.data.dy=edge.dy,edge.data.points=edge.points||[]})}function center(node){return node.y+node.dy/2}function value(link){return link.value}function ascendingDepth(a,b){return a.y-b.y}function defaultMinWidth(d){return 0===d.dy?0:2}function sankeyLink(){var minWidth=defaultMinWidth;function link(d){if(1===d.points.length)return function(h){var p=h.points[0],h=Math.max(minWidth(h),h.dy)/2;if("down-right"===p.style)return"M"+[p.x-20,p.y-h]+" L"+[p.x,p.y-h]+" L"+[p.x,p.y+h]+" L"+[p.x-20,p.y+h]+" Z";if("right-down"===p.style)return"M"+[p.x,p.y-h]+" L"+[p.x+20,p.y-h]+" L"+[p.x+20,p.y+h]+" L"+[p.x,p.y+h]+" Z"}(d);for(var path="",i=0;i<d.points.length-1;++i)path+=function(d){var x2=(d.d0||"r")+(d.d1||"r");if(d.source&&d.source===d.target)return function(y0){var h=Math.max(minWidth(y0),y0.dy)/2,r=1.5*h,theta=2*Math.PI,x0=y0.x0,y0=y0.y0;function arc(rr){var f=0<rr?1:0,rr=0<rr?r+h:r-h;return"A"+rr+" "+rr+" "+Math.abs(theta)+" 1 "+f+" "}return"M"+[x0+.1,y0-h]+" "+arc(1)+[x0-.1,y0-h]+" L"+[x0-.1,y0+h]+" "+arc(-1)+[x0+.1,y0+h]+" Z"}(d);if("rl"===x2)return function(d){var h=Math.max(minWidth(d),d.dy)/2,x0=d.x0,x1=d.x1,y0=d.y0,y1=d.y1,x3=d.x1-d.x0,y2=d.y1-d.y0,x2=(d.r0+d.r1)/2||5+h,r=Math.min(Math.abs(y1-y0)/2.1,x2),theta=Math.atan2(y2-2*r,x3),y3=(Math.sqrt(Math.max(0,x3*x3+(y2-2*r)*(y2-2*r))),d.y1>d.y0?1:-1),hs=h*Math.sin(theta),hc=h*Math.cos(theta),x2=d.x0+r*Math.sin(Math.abs(theta)),x3=d.x1+r*Math.sin(Math.abs(theta)),y2=d.y0+r*y3*(1-Math.cos(theta)),y3=d.y1-r*y3*(1-Math.cos(theta));function arc(rr){var f=0<rr*theta?1:0,rr=0===theta?r:0<rr*theta?r+h:r-h;return"A"+rr+" "+rr+" "+Math.abs(theta)+" 0 "+f+" "}return"M"+[x0,y0-h]+" "+arc(1)+[x2+hs,y2-hc]+" L"+[x3+hs,y3-hc]+" "+arc(1)+[x1,y1+h]+" L"+[x1,y1-h]+" "+arc(-1)+[x3-hs,y3+hc]+" L"+[x2-hs,y2+hc]+" "+arc(-1)+[x0,y0+h]+" Z"}(d);if("rd"===x2)return function(y2){var h=Math.max(minWidth(y2),y2.dy)/2,x0=y2.x0,x1=y2.x1,y0=y2.y0,y1=y2.y1,theta=(y2.x1,y2.x0,y2.y1,y2.y0,Math.PI/2),r=Math.max(0,x1-x0),y2=(y2.y1,y2.y0,y0+r);function arc(rr){var f=0<rr*theta?1:0,rr=0==theta?r:0<rr*theta?r+h:r-h;return"A"+rr+" "+rr+" "+Math.abs(theta)+" 0 "+f+" "}return"M"+[x0,y0-h]+" "+arc(1)+[x1+h,y2]+" L"+[x1+h,y1]+" "+[x1-h,y1]+" "+[x1-h,y2]+" "+arc(-1)+[x0,y0+h]+" Z"}(d);if("dr"===x2)return function(y2){var h=Math.max(minWidth(y2),y2.dy)/2,x0=y2.x0,x1=y2.x1,y0=y2.y0,y1=y2.y1,theta=(y2.x1,y2.x0,y2.y1,y2.y0,Math.PI/2),r=Math.max(0,x1-x0),y2=(y2.y1,y2.y0,y1-r);function arc(rr){var f=0<rr*theta?1:0,rr=0==theta?r:0<rr*theta?r+h:r-h;return"A"+rr+" "+rr+" "+Math.abs(theta)+" 0 "+f+" "}return"M"+[x0-h,y0]+" L"+[x0+h,y0]+" "+[x0+h,y2]+" "+arc(-1)+[x1,y1-h]+" L"+[x1,y1+h]+" "+arc(1)+[x0-h,y2]+" Z"}(d);if("lr"===x2)return function(d){var h=Math.max(minWidth(d),d.dy)/2,x0=d.x0,x1=d.x1,y0=d.y0,y1=d.y1,x3=d.x1-d.x0,y2=d.y1-d.y0,x2=(d.r0+d.r1)/2||5+h,r=Math.min(Math.abs(y2)/2.1,x2),theta=Math.atan2(y2-2*r,x3),y3=(Math.sqrt(Math.max(0,x3*x3+(y2-2*r)*(y2-2*r))),d.y1>d.y0?1:-1),hs=h*Math.sin(theta),hc=h*Math.cos(theta),x2=d.x0-r*Math.sin(Math.abs(theta)),x3=d.x1-r*Math.sin(Math.abs(theta)),y2=d.y0+r*y3*(1-Math.cos(theta)),y3=d.y1-r*y3*(1-Math.cos(theta));function arc(rr){var f=0<rr*theta?1:0,rr=0===theta?r:0<-rr*theta?r+h:r-h;return"A"+rr+" "+rr+" "+Math.abs(theta)+" 0 "+f+" "}return"M"+[x0,y0-h]+" "+arc(-1)+[x2-hs,y2-hc]+" L"+[x3-hs,y3-hc]+" "+arc(-1)+[x1,y1+h]+" L"+[x1,y1-h]+" "+arc(1)+[x3+hs,y3-hc]+" L"+[x2+hs,y2-hc]+" "+arc(1)+[x0,y0+h]+" Z"}(d);var h=Math.max(minWidth(d),d.dy)/2,path=d.x0,x1=d.x1,y0=d.y0,y1=d.y1;x1<path&&(path=(hc=[x1,path])[0],x1=hc[1],y0=(hs=[y1,y0])[0],y1=hs[1]);var y3=y0<y1?1:-1,y2=function(d){var Dx=d.x1-d.x0,Dy=d.y1-d.y0;return[d.dy/2,(Dx*Dx+Dy*Dy)/Math.abs(4*Dy)]}(d),x3=Math.max(y2[0],Math.min(y2[1],(x1-path)/3)),r0=Math.max(y2[0],Math.min(y2[1],d.r0||x3)),r1=Math.max(y2[0],Math.min(y2[1],d.r1||x3)),x2=x1-path,hc=y1-y0-y3*(r0+r1),hs=Math.sqrt(x2*x2+hc*hc),y2=-y3*Math.acos(Math.min(1,(r0+r1)/hs)),x3=Math.atan2(hc,x2),theta=Math.PI/2+y3*(x3+y2),hs=h*y3*Math.sin(theta),hc=h*Math.cos(theta),x2=path+ +r0*Math.sin(Math.abs(theta)),x3=x1-+r1*Math.sin(Math.abs(theta)),y2=y0+r0*y3*(1-Math.cos(theta)),y3=y1-r1*y3*(1-Math.cos(theta));(isNaN(theta)||Math.abs(theta)<.001)&&(theta=r0=r1=0,x2=path,x3=x1,y2=y0,y3=y1,hs=0,hc=h);function arc(dir,rr){var f=0<dir*(y1-y0)?1:0,rr=0===theta?rr:0<+dir*(y1-y0)?rr+h:rr-h;return"A"+rr+" "+rr+" "+Math.abs(theta)+" 0 "+f+" "}path="M"+[path,y0-h]+" "+arc(1,r0)+[x2+hs,y2-hc]+" L"+[x3+hs,y3-hc]+" "+arc(-1,r1)+[x1,y1-h]+" L"+[x1,y1+h]+" "+arc(1,r1)+[x3-hs,y3+hc]+" L"+[x2-hs,y2+hc]+" "+arc(-1,r0)+[path,y0+h]+" Z",/NaN/.test(path)&&console.error("path NaN",d,path);return path}({x0:d.points[i].x,y0:d.points[i].y,x1:d.points[i+1].x,y1:d.points[i+1].y,r0:d.points[i].ro,r1:d.points[i+1].ri,d0:d.points[i].d,d1:d.points[i+1].d,dy:d.dy});return path}return link.minWidth=function(x){return arguments.length?(minWidth=function(f){if("function"==typeof f)return f;throw new Error}(x),link):minWidth},link}function sankeyNode(){var nodeTitle=function(d){return void 0!==d.title?d.title:d.id},nodeTooltip=function(d){return void 0!==d.title?d.title:d.id},nodeValue=function(d){return null},nodeSuffix=function(d){return""},nodeVisible=function(d){return!!nodeTitle(d)};function sankeyNode(context){var selection=context.selection?context.selection():context;selection.select("text").empty()&&(selection.append("title"),selection.append("line").attr("x1",0).attr("x2",0),selection.append("rect").attr("class","node-body"),selection.append("text").attr("class","node-value").attr("dy",".35em").attr("text-anchor","middle"),selection.append("text").attr("class","node-title").attr("dy",".35em"),selection.append("rect").attr("class","node-click-target").attr("x",-5).attr("y",-5).attr("width",10).style("fill","none").style("visibility","hidden").style("pointer-events","all"),selection.attr("transform",nodeTransform)),selection.each(function(tooltipText){var title=d3Selection.select(this).select("title"),value=d3Selection.select(this).select(".node-value"),text=d3Selection.select(this).select(".node-title"),line=d3Selection.select(this).select("line"),body=d3Selection.select(this).select(".node-body"),clickTarget=d3Selection.select(this).select(".node-click-target"),layoutData=function(right){right=0!==right.incoming.length;return{titleAbove:document.getElementById("sankey-settings-labelabove").checked,right:right}}(tooltipText);layoutData.dy=tooltipText.y0===tooltipText.y1?0:Math.max(1,tooltipText.y1-tooltipText.y0);var separateValue=2<tooltipText.x1-tooltipText.x0,titleText=nodeTitle(tooltipText)+(!separateValue&&nodeValue(tooltipText)?" "+nodeValue(tooltipText):"")+nodeSuffix(tooltipText),tooltipText=nodeTooltip(tooltipText);title.text(tooltipText),value.text(nodeValue).style("display",separateValue?"inline":"none"),text.attr("text-anchor",layoutData.right?"end":"start").text(titleText).each(wrap,100),context!==selection&&(text=text.transition(context),line=line.transition(context),body=body.transition(context),clickTarget=clickTarget.transition(context)),context.attr("transform",nodeTransform),line.attr("y1",function(d){return layoutData.titleAbove?-5:0}).attr("y2",function(d){return layoutData.dy}).style("display",function(d){return d.y0!==d.y1&&nodeVisible(d)?"inline":"none"}),clickTarget.attr("height",function(d){return layoutData.dy+5}),body.attr("width",function(d){return d.x1-d.x0}).attr("height",function(d){return layoutData.dy}),text.attr("transform",function(x){var layout=layoutData,y=layout.titleAbove?-10:(x.y1-x.y0)/2;x=layout.titleAbove?layout.right?4:-4:layout.right?-4:x.x1-x.x0+4;return"translate("+x+","+y+")"}).style("display",function(d){return d.y0!==d.y1&&nodeVisible(d)?"inline":"none"}),value.style("font-size",function(d){return Math.min(d.x1-d.x0-4,d.y1-d.y0-4)+"px"}).attr("transform",function(dy){var dx=dy.x1-dy.x0,dy=dy.y1-dy.y0;return"translate("+dx/2+","+dy/2+") rotate("+(dy<dx?0:-90)+")"})})}return sankeyNode.nodeVisible=function(x){return arguments.length?(nodeVisible=required$3(x),sankeyNode):nodeVisible},sankeyNode.nodeTitle=function(x){return arguments.length?(nodeTitle=required$3(x),sankeyNode):nodeTitle},sankeyNode.nodeSuffix=function(x){return arguments.length?(nodeSuffix=required$3(x),sankeyNode):nodeSuffix},sankeyNode.nodeTooltip=function(x){return arguments.length?(nodeTooltip=required$3(x),sankeyNode):nodeTooltip},sankeyNode.nodeValue=function(x){return arguments.length?(nodeValue=required$3(x),sankeyNode):nodeValue},sankeyNode}function nodeTransform(d){return"translate("+d.x0+","+d.y0+")"}function wrap(d,width){var text=d3Selection.select(this),lines=text.text().split(/\n/);1!==lines.length&&(text.text(null),lines.forEach(function(line,i){text.append("tspan").attr("x",0).attr("dy",1.1*(0===i?.7-lines.length/2:1)+"em").text(line)}))}function required$3(f){if("function"!=typeof f)throw new Error;return f}function linkTitleGenerator(nodeTitle,typeTitle,fmt){return function(d){var parts=[],sourceTitle=nodeTitle(d.source),targetTitle=nodeTitle(d.target),matTitle=typeTitle(d);return parts.push(sourceTitle+" → "+targetTitle),matTitle&&parts.push(matTitle),parts.push(fmt(d.value)),parts.join("\n")}}function defaultLinkLabel(d){return null}exports.sankey=function(){var nodes=defaultNodes,links=defaultLinks,nodeId=defaultNodeId,nodeBackwards=defaultNodeBackwards,sourceId=defaultSourceId,targetId=defaultTargetId,linkType=defaultLinkType,ordering=null,rankSets=[],nodePosition=null,sortPorts=defaultSortPorts,x0=0,y0=0,x1=1,y1=1,dx=1,scale=null,linkValue=function(e){return e.value},whitespace=.5,verticalLayout=positionNodesVertically();function sankey(){var nested,graph={nodes:nodes.apply(null,arguments),links:links.apply(null,arguments)},G=buildGraph(graph,nodeId,nodeBackwards,sourceId,targetId,linkType,linkValue);return setNodeValues(G,linkValue),nodePosition?(G.nodes().forEach(function(pos){var node=G.node(pos),pos=nodePosition(node.data);node.x0=pos[0],node.x1=pos[0]+dx,node.y=pos[1]}),setWidths(G,scale)):(null!==ordering?function(G,ordering){ordering.forEach(function(x,i){x.forEach(function(d,j){d.forEach?d.forEach(function(d,k){d=G.node(d);d&&(d.rank=i,d.band=j,d.depth=k)}):(d=G.node(d))&&(d.rank=i,d.depth=j)})})}(G,ordering):(assignRanks(G,rankSets),sortNodes(G,25)),addDummyNodes(G),setNodeValues(G,linkValue),null===ordering&&sortNodes(G,25),nested=nestGraph(G.nodes().map(function(u){return G.node(u)})),maybeScaleToFit(0,nested),setWidths(G,scale),verticalLayout(nested,y1-y0,whitespace),function(G,width,nodeWidth){var maxRank=d3Array.max(G.nodes(),function(u){return G.node(u).rank||0})||0,dx=(width-nodeWidth)/maxRank;G.nodes().forEach(function(node){node=G.node(node);node.x0=dx/1.01*(node.rank||0),node.x1=node.x0+nodeWidth})}(G,x1-x0,dx),G.nodes().forEach(function(node){node=G.node(node);node.x0+=x0,node.x1+=x0,node.y+=y0})),prepareNodePorts(G,sortPorts),orderEdges(G),layoutLinks(G),function(G){(G.graph().dummyChains||[]).forEach(function(v){var node=G.node(v),dummyEdges=G.inEdges(v).map(function(e){return G.edge(e)});dummyEdges.forEach(function(dummyEdge){dummyEdge.origLabel.dy=dummyEdge.dy,dummyEdge.origLabel.x0=dummyEdge.x0,dummyEdge.origLabel.y0=dummyEdge.y0,dummyEdge.origLabel.r0=dummyEdge.r0,dummyEdge.origLabel.d0=dummyEdge.d0,G.setEdge(dummyEdge.origEdge,dummyEdge.origLabel)});for(var w,r1s=dummyEdges.map(function(dummyEdge){return dummyEdge.r1});node.dummy;)(dummyEdges=G.outEdges(v).map(function(e){return G.edge(e)})).forEach(function(dummyEdge,i){dummyEdge.origLabel.points.push({x:(node.x0+node.x1)/2,y:dummyEdge.y0,d:dummyEdge.d0,ro:dummyEdge.r0,ri:r1s[i]})}),r1s=dummyEdges.map(function(dummyEdge){return dummyEdge.r1}),w=G.successors(v)[0],G.removeNode(v),node=G.node(v=w);dummyEdges.forEach(function(dummyEdge){dummyEdge.origLabel.x1=dummyEdge.x1,dummyEdge.origLabel.y1=dummyEdge.y1,dummyEdge.origLabel.r1=dummyEdge.r1,dummyEdge.origLabel.d1=dummyEdge.d1})})}(G),addLinkEndpoints(G),copyResultsToGraph(G),graph}function maybeScaleToFit(G,maxValue){null===scale&&((maxValue=d3Array.sum(maxValue.bandValues))<=0?scale=1:(scale=(y1-y0)/maxValue,1!==whitespace&&(scale*=1-whitespace)))}return sankey.update=function(graph,doOrderLinks){var G=buildGraph(graph,nodeId,nodeBackwards,sourceId,targetId,linkType,linkValue);setNodeValues(G,linkValue);var nested=nestGraph(G.nodes().map(function(u){return G.node(u)}));return maybeScaleToFit(0,nested),setWidths(G,scale),prepareNodePorts(G,sortPorts),orderEdges(G),layoutLinks(G),addLinkEndpoints(G),copyResultsToGraph(G),graph},sankey.nodes=function(x){return arguments.length?(nodes=required(x),sankey):nodes},sankey.links=function(x){return arguments.length?(links=required(x),sankey):links},sankey.nodeId=function(x){return arguments.length?(nodeId=required(x),sankey):nodeId},sankey.nodeBackwards=function(x){return arguments.length?(nodeBackwards=required(x),sankey):nodeBackwards},sankey.sourceId=function(x){return arguments.length?(sourceId=required(x),sankey):sourceId},sankey.targetId=function(x){return arguments.length?(targetId=required(x),sankey):targetId},sankey.linkType=function(x){return arguments.length?(linkType=required(x),sankey):linkType},sankey.sortPorts=function(x){return arguments.length?(sortPorts=required(x),sankey):sortPorts},sankey.ordering=function(x){return arguments.length?(ordering=x,sankey):ordering},sankey.rankSets=function(x){return arguments.length?(rankSets=x,sankey):rankSets},sankey.nodeWidth=function(x){return arguments.length?(dx=x,sankey):dx},sankey.nodePosition=function(x){return arguments.length?(nodePosition=x,sankey):nodePosition},sankey.size=function(x){return arguments.length?(x0=y0=0,x1=+x[0],y1=+x[1],sankey):[x1-x0,y1-y0]},sankey.extent=function(x){return arguments.length?(x0=+x[0][0],y0=+x[0][1],x1=+x[1][0],y1=+x[1][1],sankey):[[x0,y0],[x1,y1]]},sankey.whitespace=function(x){return arguments.length?(whitespace=x,sankey):whitespace},sankey.scale=function(x){return arguments.length?(scale=x,sankey):scale},sankey.linkValue=function(x){return arguments.length?(linkValue=x,sankey):linkValue},sankey.verticalLayout=function(x){return arguments.length?(verticalLayout=required(x),sankey):verticalLayout},sankey},exports.sankeyPositionJustified=positionNodesVertically,exports.sankeyPositionRelaxation=function(){var iterations=25,nodePadding=8;function layout(nested,height){nested.forEach(function(layer){var i=0;layer.forEach(function(band){band.forEach(function(node){node.y=i++})})}),resolveCollisions();for(var alpha=1,i=iterations;0<i;--i)!function(alpha){function weightedTarget(link){return center(link.target)*link.value}nested.slice().reverse().forEach(function(layer){layer.forEach(function(band){band.forEach(function(node){var y=node.outgoing||node.edges;y.length&&(y=d3Array.sum(y,weightedTarget)/d3Array.sum(y,value),node.y+=(y-center(node))*alpha)})})})}(alpha*=.99),resolveCollisions(),function(alpha){function weightedSource(link){return center(link.source)*link.value}nested.forEach(function(layer){layer.forEach(function(band){band.forEach(function(node){var y=node.incoming||node.edges;y.length&&(y=d3Array.sum(y,weightedSource)/d3Array.sum(y,value),node.y+=(y-center(node))*alpha)})})})}(alpha),resolveCollisions();function resolveCollisions(){nested.forEach(function(layer){layer.forEach(function(nodes){var node,dy,i,y0=0,n=nodes.length;for(nodes.sort(ascendingDepth),i=0;i<n;++i)0<(dy=y0-(node=nodes[i]).y)&&(node.y+=dy),y0=node.y+node.dy+nodePadding;if(0<(dy=y0-nodePadding-height))for(y0=node.y-=dy,i=n-2;0<=i;--i)0<(dy=(node=nodes[i]).y+node.dy+nodePadding-y0)&&(node.y-=dy),y0=node.y})})}}return layout.iterations=function(x){return arguments.length?(iterations=+x,layout):iterations},layout.padding=function(x){return arguments.length?(nodePadding=+x,layout):nodePadding},layout},exports.sankeyLink=sankeyLink,exports.sankeyNode=sankeyNode,exports.sankeyDiagram=function(){var margin={top:0,right:0,bottom:0,left:0},selectedEdge=null,groups=[],fmt=d3Format.format(".3s"),node=sankeyNode(),link=sankeyLink(),linkColor=function(d){return null},linkTitle=linkTitleGenerator(node.nodeTitle(),function(d){return d.type},fmt),linkLabel=defaultLinkLabel,listeners=d3Dispatch.dispatch("selectNode","selectGroup","selectLink");function exports(context){(context.selection?context.selection():context).each(function(G){var svg=d3Selection.select(this),sankey=svg.selectAll(".sankey").data([{type:"sankey"}]),groupsPositioned=sankey.enter().append("g").classed("sankey",!0);groupsPositioned.append("g").classed("groups",!0),groupsPositioned.append("g").classed("links",!0),groupsPositioned.append("g").classed("nodes",!0),groupsPositioned.append("g").classed("slice-titles",!0),(sankey=sankey.merge(groupsPositioned)).attr("transform","translate("+margin.left+","+margin.top+")");var nodeMap=d3Collection.map(G.nodes,function(n){return n.id}),groupsPositioned=(groups||[]).map(function(group){return nodes=nodeMap,group=group,rect={top:Number.MAX_VALUE,left:Number.MAX_VALUE,bottom:0,right:0},group.nodes.forEach(function(node){node=nodes.get(node);node&&(node.x0<rect.left&&(rect.left=node.x0),node.x1>rect.right&&(rect.right=node.x1),node.y0<rect.top&&(rect.top=node.y0),node.y1>rect.bottom&&(rect.bottom=node.y1))}),group.rect=rect,group;var nodes,rect}),links=Array.from(G.links);G.nodes.forEach(function(node){Array.prototype.push.apply(links,node.fromElsewhere||[]),Array.prototype.push.apply(links,node.toElsewhere||[])}),function(sankey,context,nodeSel){nodeSel=sankey.select(".nodes").selectAll(".node").data(nodeSel,function(d){return d.id});nodeSel.exit().remove(),nodeSel=nodeSel.merge(nodeSel.enter().append("g").attr("class","node").call(node).on("click",selectNode)),(context instanceof d3Transition.transition?nodeSel.transition(context):nodeSel).call(node)}(sankey,context,G.nodes),function(linkSel,context,linkEnter){linkSel=linkSel.select(".links").selectAll(".link").data(linkEnter,function(d){return d.source.id+"-"+d.target.id+"-"+d.type});linkSel.exit().remove();linkEnter=linkSel.enter().append("g").attr("class","link").on("click",selectLink);linkEnter.append("path").attr("d",link).style("fill","white").each(function(d){this._current=d}),linkEnter.append("title"),linkEnter.append("text").attr("class","label").attr("dy","0.35em").attr("x",function(d){return d.points[0].x+4}).attr("y",function(d){return d.points[0].y}),(linkSel=linkSel.merge(linkEnter)).classed("selected",function(d){return d.id===selectedEdge}),linkSel.sort(linkOrder),context instanceof d3Transition.transition?(linkSel=linkSel.transition(context)).select("path").style("fill",linkColor).each(function(d){d3Selection.select(this).transition(context).attrTween("d",interpolateLink)}):linkSel.select("path").style("fill",linkColor).attr("d",link);linkSel.select("title").text(linkTitle),linkSel.select(".label").text(linkLabel).attr("x",function(d){return d.points[0].x+4}).attr("y",function(d){return d.points[0].y})}(sankey,context,links),function(group,enter){group=group.select(".groups").selectAll(".group").data(enter);group.exit().remove();enter=group.enter().append("g").attr("class","group");enter.append("rect"),enter.append("text").attr("x",-10).attr("y",-25),(group=group.merge(enter)).style("display",function(d){return d.title?"inline":"none"}).attr("transform",function(d){return"translate("+d.rect.left+","+d.rect.top+")"}).select("rect").attr("x",-10).attr("y",-20).attr("width",function(d){return d.rect.right-d.rect.left+20}).attr("height",function(d){return d.rect.bottom-d.rect.top+30}),group.select("text").text(function(d){return d.title})}(svg,groupsPositioned),svg.on("click",function(){listeners.call("selectNode",this,null),listeners.call("selectLink",this,null)})})}function interpolateLink(b){b.points.forEach(function(p){1e3<p.ri&&(p.ri=1e3),1e3<p.ro&&(p.ro=1e3)});var l,interp=d3Interpolate.interpolate({points:(l=this._current).points,dy:l.dy},b),that=this;return function(t){return that._current=interp(t),link(that._current)}}function linkOrder(a,b){return a.id===selectedEdge?1:b.id===selectedEdge||!a.source||a.target&&"d"===a.target.direction?-1:!b.source||b.target&&"d"===b.target.direction?1:!a.target||a.source&&"d"===a.source.direction?-1:!b.target||b.source&&"d"===b.source.direction?1:a.dy-b.dy}function selectLink(d){d3Selection.event.stopPropagation();var el=d3Selection.select(this).node();listeners.call("selectLink",el,d)}function selectNode(d){d3Selection.event.stopPropagation();var el=d3Selection.select(this).node();listeners.call("selectNode",el,d)}return exports.margins=function(_x){return arguments.length?(margin={top:(void 0===_x.top?margin:_x).top,left:(void 0===_x.left?margin:_x).left,bottom:(void 0===_x.bottom?margin:_x).bottom,right:(void 0===_x.right?margin:_x).right},this):margin},exports.groups=function(_x){return arguments.length?(groups=_x,this):groups},exports.nodeTitle=function(_x){return arguments.length?(node.nodeTitle(_x),linkTitle=linkTitleGenerator(_x,function(d){return d.type},fmt),this):node.nodeTitle()},exports.nodeSuffix=function(_x){return arguments.length?(node.nodeSuffix(_x),this):node.nodeSuffix()},exports.nodeTooltip=function(_x){return arguments.length?(node.nodeTooltip(_x),this):node.nodeTooltip()},exports.nodeValue=function(_x){return arguments.length?(node.nodeValue(_x),this):node.nodeValue()},exports.linkTitle=function(_x){return arguments.length?(linkTitle=_x,this):linkTitle},exports.linkLabel=function(_x){return arguments.length?(linkLabel=_x,this):linkLabel},exports.linkColor=function(_x){return arguments.length?(linkColor=_x,this):linkColor},exports.linkMinWidth=function(_x){return arguments.length?(link.minWidth(_x),this):link.minWidth()},exports.selectNode=function(_x){return this},exports.selectLink=function(_x){return selectedEdge=_x,this},exports.on=function(){var value=listeners.on.apply(listeners,arguments);return value===listeners?exports:value},exports},exports.sankeyLinkTitle=linkTitleGenerator,Object.defineProperty(exports,"__esModule",{value:!0})});